import{d as K,u as j,r as s,aa as ye,c as ee,J as de,h as c,i as N,w as t,j as C,k as a,l as e,Q as W,L as Y,M as J,m,t as i,n as E,s as ve,a0 as ue,ar as Ee,R as te,_ as z,ai as ke,bH as Le,T as me,e as G,V as X,ag as he,S as Q,bK as xe,aS as Ne,aP as Se,a_ as Be,aI as Ce,g as oe,q as O,aK as Ve,ak as Ae,al as Z,am as Te,z as le,ad as we,aq as Me,an as pe,ao as B,B as Ue,ap as $e,Y as Fe,U as Oe,o as De,W as be,y as Ie,a4 as ze,aj as _e,bI as Pe,bh as ce,av as Ke,ac as je,a as qe,a5 as Ze,v as Qe,a9 as We}from"./index-BlEQ5104.js";import{u as Ye}from"./firewall-C9mbeSo1.js";import{C as Je}from"./network-qu7sidyZ.js";import{_ as Ge}from"./NeTable.vue_vue_type_script_setup_true_lang-BDPau7Vg.js";/* empty css                                                */import{u as Xe}from"./upperFirst-EX6YhY0o.js";import{u as el}from"./useTabs-BeLQ169O.js";const ll={class:"space-y-6"},al={class:"flex justify-end"},tl=K({__name:"CreateOrEditNatRuleDrawer",props:{currentRule:{type:Object},isShown:{type:Boolean,default:!1}},emits:["close","reloadData"],setup(H,{emit:f}){const n=H,g=f,{t:l}=j(),_=Ye(),o=s(""),R=s(),p=s(""),v=s(),k=s(""),y=s(),b=s("*"),M=s(),S=s("SNAT"),x=s(""),I=s(),F=s([]),T=s([]),w=s(new ye),h=s();let d=s({listHostSuggestions:!1,listProtocols:!1,saveRule:!1}),V=s({listHostSuggestions:"",listHostSuggestionsDetails:"",saveRule:"",saveRuleDetails:""});const L=s([{id:"SNAT",label:"SNAT",description:l("standalone.nat.action_snat_description")},{id:"MASQUERADE",label:"MASQUERADE",description:l("standalone.nat.action_masquerade_description")},{id:"ACCEPT",label:"ACCEPT",description:l("standalone.nat.action_accept_description")}]),A=ee(()=>!n.currentRule),U=ee(()=>!!n.currentRule),ne=ee(()=>{const $={id:"*",label:l("common.any")},r=_.zones.map(D=>{var u;return{id:D.name,label:D.name.toUpperCase(),description:(u=D.interfaces)==null?void 0:u.join(", ")}});return[$,...r]});de(()=>n.isShown,()=>{n.isShown&&(ae(),w.value.clear(),Le(()=>{me(R)}),_.fetch(),se(),p.value="",k.value="",A.value?(o.value="",b.value="*",S.value="SNAT",x.value=""):n.currentRule&&(o.value=n.currentRule.name||"",b.value=n.currentRule.src||"*",S.value=n.currentRule.target||"SNAT",x.value=n.currentRule.snat_ip||""))});function q(){g("close")}function ae(){V.value.listHostSuggestions="",V.value.listHostSuggestionsDetails="",V.value.saveRule="",V.value.saveRuleDetails=""}async function se(){d.value.listHostSuggestions=!0;try{const r=(await G("ns.firewall","list-host-suggestions")).data.hosts.map(u=>{const P=`${u.label} (${u.type})`;return{id:u.value,label:u.value,description:P}});F.value=r;const D={id:"0.0.0.0/0",label:"0.0.0.0/0",description:l("standalone.nat.any_address")};T.value=[D,...r],n.currentRule&&(F.value.find(ie=>{var re;return ie.id===((re=n.currentRule)==null?void 0:re.src_ip)})||F.value.push({id:n.currentRule.src_ip,label:n.currentRule.src_ip}),p.value=n.currentRule.src_ip,T.value.find(ie=>{var re;return ie.id===((re=n.currentRule)==null?void 0:re.dest_ip)})||T.value.push({id:n.currentRule.dest_ip,label:n.currentRule.dest_ip}),k.value=n.currentRule.dest_ip)}catch($){console.error($),V.value.listHostSuggestions=l(X($)),V.value.listHostSuggestionsDetails=$.toString()}finally{d.value.listHostSuggestions=!1}}function fe($,r,D){for(let u of $)u.valid||(w.value.set(r,[u.errMessage]),h.value||(h.value=D));return $.every(u=>u.valid)}function ge(){ae(),w.value.clear();const $=[[[Q(o.value)],"name",R],[[Q(p.value),xe([Ne,Se],p.value,l("error.invalid_ip_v4_address_or_cidr"))],"src_ip",v],[[Q(b.value)],"src",M],[[Q(k.value),xe([Ne,Se],k.value,l("error.invalid_ip_v4_address_or_cidr"))],"dest_ip",y],[S.value==="SNAT"?[Q(x.value),Be(x.value)]:[],"snat_ip",I]];h.value=void 0;const r=$.map(([D,u,P])=>fe(D,u,P)).every(D=>D);return h.value&&me(h.value),r}async function Re(){var u;if(!ge())return;V.value.saveRule="",V.value.saveRuleDetails="",d.value.saveRule=!0;const r={name:o.value,src:b.value,src_ip:p.value,dest_ip:k.value,target:S.value,snat_ip:S.value==="SNAT"?x.value:""};U.value&&(r.id=(u=n.currentRule)==null?void 0:u.id);const D=U.value?"edit-rule":"add-rule";try{await G("ns.nat",D,r),g("reloadData"),q()}catch(P){console.error(P),P instanceof he?w.value=P.errorBag:(V.value.saveRule=l(X(P)),V.value.saveRuleDetails=P.toString())}finally{d.value.saveRule=!1}}return($,r)=>(c(),N(e(ke),{isShown:H.isShown,title:U.value?e(l)("standalone.nat.edit_nat_rule"):e(l)("standalone.nat.add_nat_rule"),closeAriaLabel:e(l)("common.shell.close_side_drawer"),onClose:q},{default:t(()=>[C("form",null,[C("div",ll,[a(e(W),{label:e(l)("standalone.nat.rule_name"),modelValue:o.value,"onUpdate:modelValue":r[0]||(r[0]=D=>o.value=D),modelModifiers:{trim:!0},invalidMessage:e(l)(w.value.getFirstI18nKeyFor("name")),disabled:e(d).saveRule,ref_key:"ruleNameRef",ref:R},null,8,["label","modelValue","invalidMessage","disabled"]),e(V).listHostSuggestions?(c(),N(e(Y),{key:0,kind:"error",title:e(l)("error.cannot_retrieve_host_suggestions"),description:e(V).listHostSuggestions},J({_:2},[e(V).listHostSuggestionsDetails?{name:"details",fn:t(()=>[m(i(e(V).listHostSuggestionsDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):E("",!0),a(e(ue),{modelValue:p.value,"onUpdate:modelValue":r[1]||(r[1]=D=>p.value=D),disabled:e(d).saveRule||e(d).listHostSuggestions,label:e(l)("standalone.nat.source_address"),options:F.value,placeholder:e(d).listHostSuggestions?e(l)("common.loading"):e(l)("ne_combobox.choose_or_enter"),helperText:e(l)("standalone.nat.address_helper"),invalidMessage:e(l)(w.value.getFirstI18nKeyFor("src_ip")),acceptUserInput:"",optionalLabel:e(l)("common.optional"),noResultsLabel:e(l)("ne_combobox.no_results"),limitedOptionsLabel:e(l)("ne_combobox.limited_options_label"),noOptionsLabel:e(l)("ne_combobox.no_options_label"),"selected-label":e(l)("ne_combobox.selected"),userInputLabel:e(l)("ne_combobox.user_input_label"),ref_key:"sourceAddressRef",ref:v},{tooltip:t(()=>[a(e(ve),{placement:"top-start"},{content:t(()=>[m(i(e(l)("standalone.nat.source_address_tooltip")),1)]),_:1})]),_:1},8,["modelValue","disabled","label","options","placeholder","helperText","invalidMessage","optionalLabel","noResultsLabel","limitedOptionsLabel","noOptionsLabel","selected-label","userInputLabel"]),a(e(ue),{modelValue:b.value,"onUpdate:modelValue":r[2]||(r[2]=D=>b.value=D),disabled:e(d).saveRule,label:e(l)("standalone.nat.outbound_zone"),options:ne.value,invalidMessage:e(l)(w.value.getFirstI18nKeyFor("zone")),noResultsLabel:e(l)("ne_combobox.no_results"),limitedOptionsLabel:e(l)("ne_combobox.limited_options_label"),noOptionsLabel:e(l)("ne_combobox.no_options_label"),selectedLabel:e(l)("ne_combobox.selected"),userInputLabel:e(l)("ne_combobox.user_input_label"),optionalLabel:e(l)("common.optional"),ref_key:"outboundZoneRef",ref:M},null,8,["modelValue","disabled","label","options","invalidMessage","noResultsLabel","limitedOptionsLabel","noOptionsLabel","selectedLabel","userInputLabel","optionalLabel"]),a(e(ue),{modelValue:k.value,"onUpdate:modelValue":r[3]||(r[3]=D=>k.value=D),disabled:e(d).saveRule||e(d).listHostSuggestions,label:e(l)("standalone.nat.destination_address"),helperText:e(l)("standalone.nat.address_helper"),options:T.value,placeholder:e(d).listHostSuggestions?e(l)("common.loading"):e(l)("ne_combobox.choose_or_enter"),invalidMessage:e(l)(w.value.getFirstI18nKeyFor("dest_ip")),acceptUserInput:"",optionalLabel:e(l)("common.optional"),noResultsLabel:e(l)("ne_combobox.no_results"),limitedOptionsLabel:e(l)("ne_combobox.limited_options_label"),noOptionsLabel:e(l)("ne_combobox.no_options_label"),"selected-label":e(l)("ne_combobox.selected"),"user-input-label":e(l)("ne_combobox.user_input_label"),ref_key:"destinationAddressRef",ref:y},{tooltip:t(()=>[a(e(ve),{placement:"top-start"},{content:t(()=>[m(i(e(l)("standalone.nat.destination_address_tooltip")),1)]),_:1})]),_:1},8,["modelValue","disabled","label","helperText","options","placeholder","invalidMessage","optionalLabel","noResultsLabel","limitedOptionsLabel","noOptionsLabel","selected-label","user-input-label"]),a(e(Ee),{modelValue:S.value,"onUpdate:modelValue":r[4]||(r[4]=D=>S.value=D),disabled:e(d).saveRule,label:e(l)("standalone.nat.action"),options:L.value},null,8,["modelValue","disabled","label","options"]),S.value==="SNAT"?(c(),N(e(W),{key:1,label:e(l)("standalone.nat.rewrite_ip_address"),modelValue:x.value,"onUpdate:modelValue":r[5]||(r[5]=D=>x.value=D),modelModifiers:{trim:!0},invalidMessage:e(l)(w.value.getFirstI18nKeyFor("snat_ip")),disabled:e(d).saveRule,ref_key:"rewriteIpAddressRef",ref:I},null,8,["label","modelValue","invalidMessage","disabled"])):E("",!0),e(V).saveRule?(c(),N(e(Y),{key:2,kind:"error",title:e(l)("error.cannot_save_nat_rule"),description:e(V).saveRule},J({_:2},[e(V).saveRuleDetails?{name:"details",fn:t(()=>[m(i(e(V).saveRuleDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):E("",!0)]),r[6]||(r[6]=C("hr",{class:"my-8 border-gray-200 dark:border-gray-700"},null,-1)),C("div",al,[a(e(z),{kind:"tertiary",size:"lg",onClick:te(q,["prevent"]),disabled:e(d).saveRule,class:"mr-3"},{default:t(()=>[m(i(e(l)("common.cancel")),1)]),_:1},8,["disabled"]),a(e(z),{kind:"primary",size:"lg",onClick:te(Re,["prevent"]),disabled:e(d).saveRule,loading:e(d).saveRule},{default:t(()=>[m(i(A.value?e(l)("standalone.nat.add_nat_rule"):e(l)("standalone.nat.save_nat_rule")),1)]),_:1},8,["disabled","loading"])])])]),_:1},8,["isShown","title","closeAriaLabel"]))}}),nl={key:0},sl={key:0},ol={key:1},il={class:"align-center -ml-2.5 flex items-center gap-2 xl:ml-0 xl:justify-end"},rl=K({__name:"NatRulesTable",props:{rules:{type:Array,required:!0},loading:{type:Boolean,required:!0}},emits:["reloadRules","editRule","deleteRule"],setup(H,{emit:f}){const n=H,g=f,{t:l}=j(),_=s(10),{currentPage:o,paginatedItems:R}=Ce(()=>n.rules,{itemsPerPage:_});function p(v){return[{id:"delete",label:l("common.delete"),icon:"trash",iconStyle:"fas",action:()=>g("deleteRule",v),danger:!0}]}return(v,k)=>{const y=oe("font-awesome-icon");return c(),O("div",null,[a(e(Me),{ariaLabel:e(l)("standalone.nat.nat_rules"),cardBreakpoint:"xl",loading:H.loading,skeletonColumns:6,skeletonRows:3},{paginator:t(()=>[a(e(Ve),{"current-page":e(o),"total-rows":n.rules.length,"page-size":_.value,"nav-pagination-label":e(l)("ne_table.pagination"),"next-label":e(l)("ne_table.go_to_next_page"),"previous-label":e(l)("ne_table.go_to_previous_page"),"range-of-total-label":e(l)("ne_table.of"),"page-size-label":e(l)("ne_table.show"),onSelectPage:k[0]||(k[0]=b=>{o.value=b}),onSelectPageSize:k[1]||(k[1]=b=>{_.value=b})},null,8,["current-page","total-rows","page-size","nav-pagination-label","next-label","previous-label","range-of-total-label","page-size-label"])]),default:t(()=>[a(e(Ae),null,{default:t(()=>[a(e(Z),null,{default:t(()=>[m(i(e(l)("standalone.nat.name")),1)]),_:1}),a(e(Z),null,{default:t(()=>[m(i(e(l)("standalone.nat.source_address")),1)]),_:1}),a(e(Z),null,{default:t(()=>[m(i(e(l)("standalone.nat.outbound_zone")),1)]),_:1}),a(e(Z),null,{default:t(()=>[m(i(e(l)("standalone.nat.destination_address")),1)]),_:1}),a(e(Z),null,{default:t(()=>[m(i(e(l)("standalone.nat.action")),1)]),_:1}),a(e(Z),null,{default:t(()=>[m(i(e(l)("standalone.nat.rewrite_ip")),1)]),_:1}),a(e(Z))]),_:1}),a(e(Te),null,{default:t(()=>[(c(!0),O(le,null,we(e(R),(b,M)=>(c(),N(e(pe),{key:M},{default:t(()=>[a(e(B),{"data-label":e(l)("standalone.nat.name")},{default:t(()=>[m(i(b.name),1)]),_:2},1032,["data-label"]),a(e(B),{"data-label":e(l)("standalone.nat.source_address")},{default:t(()=>[m(i(b.src_ip),1)]),_:2},1032,["data-label"]),a(e(B),{"data-label":e(l)("standalone.nat.outbound_zone")},{default:t(()=>[b.src==="*"?(c(),O("span",nl,i(e(l)("common.any")),1)):(c(),N(e(Ue),{key:1,text:b.src.toUpperCase(),kind:"custom",customColorClasses:e(Je)(b.src)},null,8,["text","customColorClasses"]))]),_:2},1032,["data-label"]),a(e(B),{"data-label":e(l)("standalone.nat.destination_address")},{default:t(()=>[m(i(b.dest_ip),1)]),_:2},1032,["data-label"]),a(e(B),{"data-label":e(l)("standalone.nat.action")},{default:t(()=>[m(i(b.target),1)]),_:2},1032,["data-label"]),a(e(B),{"data-label":e(l)("standalone.nat.rewrite_ip")},{default:t(()=>[b.snat_ip?(c(),O("span",sl,i(b.snat_ip),1)):(c(),O("span",ol," - "))]),_:2},1032,["data-label"]),a(e(B),{"data-label":e(l)("common.actions")},{default:t(()=>[C("div",il,[a(e(z),{kind:"tertiary",size:"lg",onClick:S=>g("editRule",b)},{prefix:t(()=>[a(y,{icon:["fas","pen-to-square"],class:"h-4 w-4","aria-hidden":"true"})]),default:t(()=>[m(" "+i(e(l)("common.edit")),1)]),_:2},1032,["onClick"]),a(e($e),{items:p(b),"align-to-right":!0},null,8,["items"])])]),_:2},1032,["data-label"])]),_:2},1024))),128))]),_:1})]),_:1},8,["ariaLabel","loading"])])}}}),ul=K({__name:"DeleteNatRuleModal",props:{visible:{type:Boolean},rule:{type:Object}},emits:["close","reloadData"],setup(H,{emit:f}){const n=H,g=f,{t:l}=j();let _=s({deleteRule:!1}),o=s({deleteRule:"",deleteRuleDetails:""});de(()=>n.visible,()=>{n.visible&&(o.value.deleteRule="",o.value.deleteRuleDetails="")});async function R(){if(n.rule){o.value.deleteRule="",o.value.deleteRuleDetails="",_.value.deleteRule=!0;try{await G("ns.nat","delete-rule",{id:n.rule.id}),g("close"),g("reloadData")}catch(p){console.error(p),o.value.deleteRule=l(X(p)),o.value.deleteRuleDetails=p.toString()}finally{_.value.deleteRule=!1}}}return(p,v)=>(c(),N(e(Fe),{visible:H.visible,title:e(l)("standalone.nat.delete_nat_rule"),kind:"warning",primaryLabel:e(l)("standalone.nat.delete_nat_rule"),cancelLabel:e(l)("common.cancel"),primaryButtonKind:"danger",primaryButtonDisabled:e(_).deleteRule,primaryButtonLoading:e(_).deleteRule,closeAriaLabel:e(l)("common.close"),onClose:v[0]||(v[0]=k=>g("close")),onPrimaryClick:R},{default:t(()=>{var k;return[m(i(e(l)("standalone.nat.confirm_delete_rule",{name:(k=H.rule)==null?void 0:k.name}))+" ",1),e(o).deleteRule?(c(),N(e(Y),{key:0,kind:"error",title:e(l)("error.cannot_delete_rule"),description:e(o).deleteRule,class:"mt-4"},J({_:2},[e(o).deleteRuleDetails?{name:"details",fn:t(()=>[m(i(e(o).deleteRuleDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):E("",!0)]}),_:1},8,["visible","title","primaryLabel","cancelLabel","primaryButtonDisabled","primaryButtonLoading","closeAriaLabel"]))}}),dl={class:"mb-8 flex flex-col items-start justify-between gap-6 md:flex-row"},cl={class:"max-w-2xl text-gray-500 dark:text-gray-400"},pl=K({__name:"NatRulesContent",setup(H){const{t:f}=j(),n=Oe(),g=s([]),l=s(void 0),_=s(!1),o=s(!1),R=s({listRules:!1}),p=s({listRules:"",listRulesDetails:""});De(()=>{v()});async function v(){k(),n.getChanges()}async function k(){R.value.listRules=!0,p.value.listRules="",p.value.listRulesDetails="",g.value=[];try{const x=await G("ns.nat","list-rules");g.value=x.data.rules}catch(x){console.error(x),p.value.listRules=f(X(x)),p.value.listRulesDetails=x.toString()}finally{R.value.listRules=!1}}function y(){l.value=void 0,_.value=!0}function b(x){l.value=x,_.value=!0}function M(x){l.value=x,o.value=!0}function S(){_.value=!1}return(x,I)=>{const F=oe("FontAwesomeIcon");return c(),O("div",null,[a(e(be),{tag:"h5",class:"mb-2"},{default:t(()=>[m(i(e(f)("standalone.nat.nat_rules")),1)]),_:1}),C("div",dl,[C("div",cl,i(e(f)("standalone.nat.nat_rules_description")),1),R.value.listRules||g.value.length?(c(),N(e(z),{key:0,kind:"secondary",size:"lg",onClick:y,class:"shrink-0"},{prefix:t(()=>[a(F,{icon:["fas","circle-plus"],"aria-hidden":"true"})]),default:t(()=>[m(" "+i(e(f)("standalone.nat.add_nat_rule")),1)]),_:1})):E("",!0)]),p.value.listRules?(c(),N(e(Y),{key:0,kind:"error",title:e(f)("error.cannot_retrieve_nat_rules"),description:p.value.listRules,class:"mb-5"},J({_:2},[p.value.listRulesDetails?{name:"details",fn:t(()=>[m(i(p.value.listRulesDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):(c(),O(le,{key:1},[R.value.listRules?(c(),N(e(Ie),{key:0,lines:5,size:"lg"})):(c(),O(le,{key:1},[e(ze)(g.value)?(c(),N(e(_e),{key:0,title:e(f)("standalone.nat.no_rules_found"),icon:["fas","network-wired"],class:"mt-4"},{default:t(()=>[a(e(z),{kind:"secondary",size:"lg",onClick:y},{prefix:t(()=>[a(F,{icon:["fas","circle-plus"],"aria-hidden":"true"})]),default:t(()=>[m(" "+i(e(f)("standalone.nat.add_nat_rule")),1)]),_:1})]),_:1},8,["title"])):(c(),N(rl,{key:1,rules:g.value,loading:R.value.listRules,onReloadRules:v,onEditRule:b,onDeleteRule:M},null,8,["rules","loading"]))],64))],64)),a(tl,{currentRule:l.value,isShown:_.value,onClose:S,onReloadData:v},null,8,["currentRule","isShown"]),a(ul,{visible:o.value,rule:l.value,onClose:I[0]||(I[0]=T=>o.value=!1),onReloadData:v},null,8,["visible","rule"])])}}}),vl={class:"z-0 -mb-1 table max-w-md rounded-se-md rounded-ss-md bg-indigo-300 p-2 text-sm dark:bg-indigo-800"},ml={class:"align-center flex justify-end"},He=K({__name:"NetmapTable",props:{rules:{type:Array,required:!0},netmapType:{type:String,required:!0},loading:{type:Boolean,required:!0}},emits:["reloadRules","editRule","deleteRule"],setup(H,{emit:f}){const n=H,g=f,{t:l}=j(),_={label:l("common.name"),key:"name"},o={label:l("standalone.netmap.source_network"),key:"src"},R={label:l("standalone.netmap.destination_network"),key:"dest"},p={label:n.netmapType==="src"?l("standalone.netmap.source_network"):l("standalone.netmap.destination_network"),key:"map_from"},v={label:l("standalone.netmap.mapped_network"),key:"map_to"},k={label:"",key:"menu"},y=ee(()=>n.netmapType==="src"?[_,R,p,v,k]:[_,o,p,v,k]);function b(M){return[{id:"delete",label:l("common.delete"),icon:"trash",iconStyle:"fas",action:()=>g("deleteRule",M),danger:!0}]}return(M,S)=>{const x=oe("font-awesome-icon");return c(),O("div",null,[C("p",vl,i(H.netmapType==="src"?e(l)("standalone.netmap.source_netmap"):e(l)("standalone.netmap.destination_netmap")),1),a(Ge,{data:H.rules,headers:y.value,loading:H.loading},{menu:t(({item:I})=>[C("div",ml,[a(e(z),{kind:"tertiary",size:"lg",onClick:F=>g("editRule",I),class:"mr-2"},{prefix:t(()=>[a(x,{icon:["fas","pen-to-square"],class:"h-4 w-4","aria-hidden":"true"})]),default:t(()=>[m(" "+i(e(l)("common.edit")),1)]),_:2},1032,["onClick"]),a(e($e),{items:b(I),"align-to-right":!0},null,8,["items"])])]),_:1},8,["data","headers","loading"])])}}}),_l={class:"space-y-6"},bl={class:"flex items-center"},fl={class:"space-y-6"},gl={class:"flex justify-end"},Rl=K({__name:"CreateOrEditNetmapRuleDrawer",props:{currentRule:{type:Object},netmapType:{type:String},isShown:{type:Boolean,default:!1}},emits:["close","reloadData"],setup(H,{emit:f}){const n=H,g=f,{t:l}=j(),_=s(""),o=s(),R=s(""),p=s(),v=s(""),k=s(),y=s(""),b=s(),M=s(""),S=s(),x=s([]),I=s(),F=s([]),T=s(),w=s([]),h=s(!1),d=s(new ye),V=s();let L=s({listDevices:!1,saveRule:!1}),A=s({listDevices:"",listDevicesDetails:"",saveRule:"",saveRuleDetails:""});const U=ee(()=>!n.currentRule),ne=ee(()=>U.value?n.netmapType=="src"?l("standalone.netmap.add_source_netmap"):l("standalone.netmap.add_destination_netmap"):n.netmapType=="src"?l("standalone.netmap.edit_source_netmap"):l("standalone.netmap.edit_destination_netmap"));de(()=>n.isShown,()=>{n.isShown&&(ae(),d.value.clear(),Le(()=>{me(o)}),se(),x.value=[],F.value=[],h.value=!1,U.value?(_.value="",R.value="",v.value="",y.value="",M.value=""):n.currentRule&&(_.value=n.currentRule.name||"",R.value=n.currentRule.src||"",v.value=n.currentRule.dest||"",y.value=n.currentRule.map_from||"",M.value=n.currentRule.map_to||""))});function q(){g("close")}function ae(){A.value.listDevices="",A.value.listDevicesDetails="",A.value.saveRule="",A.value.saveRuleDetails=""}async function se(){var $;A.value.listDevices="",A.value.listDevicesDetails="",L.value.listDevices=!0,w.value=[];try{const r=await G("ns.netmap","list-devices");w.value=r.data.devices.map(D=>({id:D.device,label:D.device,description:D.interface||""})),n.currentRule&&(($=n.currentRule.device_in)!=null&&$.length&&(x.value=n.currentRule.device_in.map(D=>w.value.find(u=>u.id===D)),h.value=!0),n.currentRule.device_out&&(F.value=n.currentRule.device_out.map(D=>w.value.find(u=>u.id===D)),h.value=!0))}catch(r){console.error(r),A.value.listDevices=l(X(r)),A.value.listDevicesDetails=r.toString()}finally{L.value.listDevices=!1}}function fe($,r,D){for(let u of $)u.valid||(d.value.set(r,[u.errMessage]),V.value||(V.value=D));return $.every(u=>u.valid)}function ge(){ae(),d.value.clear();const $=n.netmapType==="src"?[[Q(v.value),ce(v.value)],"dest",k]:[[Q(R.value),ce(R.value)],"src",p],r=[[[Q(_.value)],"name",o],$,[[Q(y.value),ce(y.value)],"map_from",b],[[Q(M.value),ce(M.value)],"map_to",S]];V.value=void 0;const D=r.map(([u,P,ie])=>fe(u,P,ie)).every(u=>u);return V.value&&me(V.value),D}async function Re(){if(!ge())return;A.value.saveRule="",A.value.saveRuleDetails="",L.value.saveRule=!0;const r={name:_.value,src:R.value,dest:v.value,map_from:y.value,map_to:M.value,device_in:x.value.map(u=>u.id),device_out:F.value.map(u=>u.id)};n.currentRule&&(r.id=n.currentRule.id);const D=U.value?"add-rule":"edit-rule";try{await G("ns.netmap",D,r),g("reloadData"),q()}catch(u){console.error(u),u instanceof he?d.value=u.errorBag:(A.value.saveRule=l(X(u)),A.value.saveRuleDetails=u.toString())}finally{L.value.saveRule=!1}}return($,r)=>{const D=oe("FontAwesomeIcon");return c(),N(e(ke),{isShown:H.isShown,title:ne.value,closeAriaLabel:e(l)("common.shell.close_side_drawer"),onClose:q},{default:t(()=>[C("form",null,[C("div",_l,[a(e(W),{label:e(l)("common.name"),modelValue:_.value,"onUpdate:modelValue":r[0]||(r[0]=u=>_.value=u),modelModifiers:{trim:!0},invalidMessage:e(l)(d.value.getFirstI18nKeyFor("name")),disabled:e(L).saveRule,ref_key:"ruleNameRef",ref:o},null,8,["label","modelValue","invalidMessage","disabled"]),H.netmapType==="dest"?(c(),N(e(W),{key:0,label:e(l)("standalone.netmap.source_network"),modelValue:R.value,"onUpdate:modelValue":r[1]||(r[1]=u=>R.value=u),modelModifiers:{trim:!0},helperText:e(l)("standalone.netmap.network_cidr"),invalidMessage:e(l)(d.value.getFirstI18nKeyFor("src")),disabled:e(L).saveRule,ref_key:"sourceNetworkRef",ref:p},null,8,["label","modelValue","helperText","invalidMessage","disabled"])):(c(),N(e(W),{key:1,label:e(l)("standalone.netmap.destination_network"),modelValue:v.value,"onUpdate:modelValue":r[2]||(r[2]=u=>v.value=u),modelModifiers:{trim:!0},helperText:e(l)("standalone.netmap.network_cidr"),invalidMessage:e(l)(d.value.getFirstI18nKeyFor("dest")),disabled:e(L).saveRule,ref_key:"destinationNetworkRef",ref:k},null,8,["label","modelValue","helperText","invalidMessage","disabled"])),C("div",bl,[a(e(W),{label:H.netmapType=="src"?e(l)("standalone.netmap.source_network"):e(l)("standalone.netmap.destination_network"),modelValue:y.value,"onUpdate:modelValue":r[3]||(r[3]=u=>y.value=u),modelModifiers:{trim:!0},helperText:e(l)("standalone.netmap.network_cidr"),invalidMessage:e(l)(d.value.getFirstI18nKeyFor("map_from")),disabled:e(L).saveRule,ref_key:"mapFromRef",ref:b},null,8,["label","modelValue","helperText","invalidMessage","disabled"]),a(D,{icon:["fas","arrow-right"],class:"px-4"}),a(e(W),{label:e(l)("standalone.netmap.mapped_network"),modelValue:M.value,"onUpdate:modelValue":r[4]||(r[4]=u=>M.value=u),modelModifiers:{trim:!0},helperText:e(l)("standalone.netmap.network_cidr"),invalidMessage:e(l)(d.value.getFirstI18nKeyFor("map_to")),disabled:e(L).saveRule,ref_key:"mapToRef",ref:S},null,8,["label","modelValue","helperText","invalidMessage","disabled"])]),e(A).listDevices?(c(),N(e(Y),{key:2,kind:"error",title:e(l)("error.cannot_retrieve_devices"),description:e(A).listDevices},J({_:2},[e(A).listDevicesDetails?{name:"details",fn:t(()=>[m(i(e(A).listDevicesDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):E("",!0),a(e(Pe),{label:e(l)("common.advanced_settings"),isExpanded:h.value,onSetExpanded:r[7]||(r[7]=u=>h.value=u)},{default:t(()=>[C("div",fl,[a(e(ue),{label:e(l)("standalone.netmap.inbound_devices"),modelValue:x.value,"onUpdate:modelValue":r[5]||(r[5]=u=>x.value=u),options:w.value,placeholder:e(L).listDevices?e(l)("common.loading"):e(l)("ne_combobox.choose_multiple"),multiple:"","helper-text":e(l)("standalone.netmap.device_helper"),invalidMessage:e(l)(d.value.getFirstI18nKeyFor("device_in")),disabled:e(L).saveRule||e(L).listDevices,optional:!0,optionalLabel:e(l)("common.optional"),noResultsLabel:e(l)("ne_combobox.no_results"),limitedOptionsLabel:e(l)("ne_combobox.limited_options_label"),noOptionsLabel:e(l)("ne_combobox.no_options_label"),"selected-label":e(l)("ne_combobox.selected"),"user-input-label":e(l)("ne_combobox.user_input_label"),ref_key:"inboundDevicesRef",ref:I},null,8,["label","modelValue","options","placeholder","helper-text","invalidMessage","disabled","optionalLabel","noResultsLabel","limitedOptionsLabel","noOptionsLabel","selected-label","user-input-label"]),a(e(ue),{label:e(l)("standalone.netmap.outbound_devices"),modelValue:F.value,"onUpdate:modelValue":r[6]||(r[6]=u=>F.value=u),options:w.value,placeholder:e(L).listDevices?e(l)("common.loading"):e(l)("ne_combobox.choose_multiple"),multiple:"","helper-text":e(l)("standalone.netmap.device_helper"),invalidMessage:e(l)(d.value.getFirstI18nKeyFor("device_out")),disabled:e(L).saveRule||e(L).listDevices,optional:!0,optionalLabel:e(l)("common.optional"),noResultsLabel:e(l)("ne_combobox.no_results"),limitedOptionsLabel:e(l)("ne_combobox.limited_options_label"),noOptionsLabel:e(l)("ne_combobox.no_options_label"),"selected-label":e(l)("ne_combobox.selected"),"user-input-label":e(l)("ne_combobox.user_input_label"),ref_key:"outboundDevicesRef",ref:T},null,8,["label","modelValue","options","placeholder","helper-text","invalidMessage","disabled","optionalLabel","noResultsLabel","limitedOptionsLabel","noOptionsLabel","selected-label","user-input-label"])])]),_:1},8,["label","isExpanded"]),e(A).saveRule?(c(),N(e(Y),{key:3,kind:"error",title:e(l)("error.cannot_save_netmap"),description:e(A).saveRule},J({_:2},[e(A).saveRuleDetails?{name:"details",fn:t(()=>[m(i(e(A).saveRuleDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):E("",!0)]),r[8]||(r[8]=C("hr",{class:"my-8 border-gray-200 dark:border-gray-700"},null,-1)),C("div",gl,[a(e(z),{kind:"tertiary",size:"lg",onClick:te(q,["prevent"]),disabled:e(L).saveRule,class:"mr-3"},{default:t(()=>[m(i(e(l)("common.cancel")),1)]),_:1},8,["disabled"]),a(e(z),{kind:"primary",size:"lg",onClick:te(Re,["prevent"]),disabled:e(L).saveRule||e(L).listDevices,loading:e(L).saveRule},{default:t(()=>[m(i(U.value?e(l)("standalone.netmap.add_netmap"):e(l)("standalone.netmap.save_netmap")),1)]),_:1},8,["disabled","loading"])])])]),_:1},8,["isShown","title","closeAriaLabel"])}}}),yl=K({__name:"DeleteNetmapModal",props:{visible:{type:Boolean},rule:{type:Object}},emits:["close","reloadData"],setup(H,{emit:f}){const n=H,g=f,{t:l}=j();let _=s({deleteRule:!1}),o=s({deleteRule:"",deleteRuleDetails:""});de(()=>n.visible,()=>{n.visible&&(o.value.deleteRule="",o.value.deleteRuleDetails="")});async function R(){if(n.rule){o.value.deleteRule="",o.value.deleteRuleDetails="",_.value.deleteRule=!0;try{await G("ns.netmap","delete-rule",{id:n.rule.id}),g("close"),g("reloadData")}catch(p){console.error(p),o.value.deleteRule=l(X(p)),o.value.deleteRuleDetails=p.toString()}finally{_.value.deleteRule=!1}}}return(p,v)=>(c(),N(e(Fe),{visible:H.visible,title:e(l)("standalone.netmap.delete_netmap"),kind:"warning",primaryLabel:e(l)("standalone.netmap.delete_netmap"),cancelLabel:e(l)("common.cancel"),primaryButtonKind:"danger",primaryButtonDisabled:e(_).deleteRule,primaryButtonLoading:e(_).deleteRule,closeAriaLabel:e(l)("common.close"),onClose:v[0]||(v[0]=k=>g("close")),onPrimaryClick:R},{default:t(()=>{var k;return[m(i(e(l)("standalone.netmap.confirm_delete_rule",{name:(k=H.rule)==null?void 0:k.name}))+" ",1),e(o).deleteRule?(c(),N(e(Y),{key:0,kind:"error",title:e(l)("error.cannot_delete_netmap"),description:e(o).deleteRule,class:"mt-4"},J({_:2},[e(o).deleteRuleDetails?{name:"details",fn:t(()=>[m(i(e(o).deleteRuleDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):E("",!0)]}),_:1},8,["visible","title","primaryLabel","cancelLabel","primaryButtonDisabled","primaryButtonLoading","closeAriaLabel"]))}}),kl={class:"mb-8 flex flex-col items-start justify-between gap-6 xl:flex-row"},hl={class:"max-w-2xl text-gray-500 dark:text-gray-400"},wl={key:0,class:"shrink-0"},Dl={class:"flex flex-col"},xl=K({__name:"NetmapContent",setup(H){const{t:f}=j(),n=Oe(),g=s([]),l=s(void 0),_=s("src"),o=s(!1),R=s(!1),p=s({listRules:!1}),v=s({listRules:"",listRulesDetails:""}),k=ee(()=>g.value.filter(T=>T.dest)),y=ee(()=>g.value.filter(T=>T.src));De(()=>{b()});async function b(){M(),n.getChanges()}async function M(){p.value.listRules=!0,v.value.listRules="",v.value.listRulesDetails="",g.value=[];try{const T=await G("ns.netmap","list-rules");g.value=T.data.rules}catch(T){console.error(T),v.value.listRules=f(X(T)),v.value.listRulesDetails=T.toString()}finally{p.value.listRules=!1}}function S(T){l.value=void 0,_.value=T,o.value=!0}function x(T){l.value=T,_.value=T.dest?"src":"dest",o.value=!0}function I(T){l.value=T,R.value=!0}function F(){o.value=!1}return(T,w)=>{const h=oe("FontAwesomeIcon");return c(),O("div",null,[a(e(be),{tag:"h5",class:"mb-2"},{default:t(()=>[m(i(e(f)("standalone.netmap.title")),1)]),_:1}),C("div",kl,[C("div",hl,i(e(f)("standalone.netmap.netmap_rules_description")),1),p.value.listRules||g.value.length?(c(),O("div",wl,[a(e(z),{kind:"secondary",size:"lg",onClick:w[0]||(w[0]=d=>S("src"))},{prefix:t(()=>[a(h,{icon:["fas","circle-plus"],"aria-hidden":"true"})]),default:t(()=>[m(" "+i(e(f)("standalone.netmap.add_source_netmap")),1)]),_:1}),a(e(z),{kind:"secondary",size:"lg",onClick:w[1]||(w[1]=d=>S("dest")),class:"ml-4"},{prefix:t(()=>[a(h,{icon:["fas","circle-plus"],"aria-hidden":"true"})]),default:t(()=>[m(" "+i(e(f)("standalone.netmap.add_destination_netmap")),1)]),_:1})])):E("",!0)]),v.value.listRules?(c(),N(e(Y),{key:0,kind:"error",title:e(f)("error.cannot_retrieve_netmap_rules"),description:v.value.listRules,class:"mb-5"},J({_:2},[v.value.listRulesDetails?{name:"details",fn:t(()=>[m(i(v.value.listRulesDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):(c(),O(le,{key:1},[p.value.listRules?(c(),N(e(Ie),{key:0,lines:6,size:"lg"})):(c(),O(le,{key:1},[e(ze)(g.value)?(c(),N(e(_e),{key:0,title:e(f)("standalone.netmap.no_netmap_found"),icon:["fas","network-wired"],class:"mt-4"},{default:t(()=>[C("div",Dl,[a(e(z),{kind:"secondary",size:"lg",onClick:w[2]||(w[2]=d=>S("src"))},{prefix:t(()=>[a(h,{icon:["fas","circle-plus"],"aria-hidden":"true"})]),default:t(()=>[m(" "+i(e(f)("standalone.netmap.add_source_netmap")),1)]),_:1}),a(e(z),{kind:"secondary",size:"lg",onClick:w[3]||(w[3]=d=>S("dest")),class:"mt-4"},{prefix:t(()=>[a(h,{icon:["fas","circle-plus"],"aria-hidden":"true"})]),default:t(()=>[m(" "+i(e(f)("standalone.netmap.add_destination_netmap")),1)]),_:1})])]),_:1},8,["title"])):(c(),O(le,{key:1},[k.value.length?(c(),N(He,{key:0,"netmap-type":"src",rules:k.value,loading:p.value.listRules,onReloadRules:b,onEditRule:x,onDeleteRule:I},null,8,["rules","loading"])):E("",!0),y.value.length?(c(),N(He,{key:1,"netmap-type":"dest",rules:y.value,loading:p.value.listRules,onReloadRules:b,onEditRule:x,onDeleteRule:I,class:"mt-8"},null,8,["rules","loading"])):E("",!0)],64))],64))],64)),a(Rl,{currentRule:l.value,netmapType:_.value,isShown:o.value,onClose:F,onReloadData:b},null,8,["currentRule","netmapType","isShown"]),a(yl,{visible:R.value,rule:l.value,onClose:w[4]||(w[4]=d=>R.value=!1),onReloadData:b},null,8,["visible","rule"])])}}}),Nl={class:"flex items-center gap-2"},Sl={class:"flex items-center gap-2"},Hl={class:"-ml-2.5 flex xl:ml-0 xl:justify-end"},Ll=K({__name:"NatHelpersTable",props:{filteredNatHelpers:{type:Array,required:!0},totalNatHelpers:{type:Number,required:!0},loading:{type:Boolean,required:!0}},emits:["reloadNatHelpers","editNatHelper","clearFilters"],setup(H,{emit:f}){const n=H,g=f,{t:l}=j(),_=s(25),{currentPage:o,paginatedItems:R}=Ce(()=>n.filteredNatHelpers,{itemsPerPage:_});return(p,v)=>{const k=oe("font-awesome-icon");return c(),N(e(Me),{ariaLabel:e(l)("standalone.nat_helpers.title"),cardBreakpoint:"xl",loading:H.loading,skeletonColumns:4,skeletonRows:7},{paginator:t(()=>[a(e(Ve),{"current-page":e(o),"total-rows":n.filteredNatHelpers.length,"page-size":_.value,"nav-pagination-label":e(l)("ne_table.pagination"),"next-label":e(l)("ne_table.go_to_next_page"),"previous-label":e(l)("ne_table.go_to_previous_page"),"range-of-total-label":e(l)("ne_table.of"),"page-size-label":e(l)("ne_table.show"),onSelectPage:v[1]||(v[1]=y=>{o.value=y}),onSelectPageSize:v[2]||(v[2]=y=>{_.value=y})},null,8,["current-page","total-rows","page-size","nav-pagination-label","next-label","previous-label","range-of-total-label","page-size-label"])]),default:t(()=>[a(e(Ae),null,{default:t(()=>[a(e(Z),null,{default:t(()=>[m(i(e(l)("standalone.nat_helpers.module")),1)]),_:1}),a(e(Z),null,{default:t(()=>[m(i(e(l)("standalone.nat_helpers.status")),1)]),_:1}),a(e(Z),null,{default:t(()=>[m(i(e(l)("standalone.nat_helpers.loaded_on_kernel")),1)]),_:1}),a(e(Z))]),_:1}),a(e(Te),null,{default:t(()=>[n.totalNatHelpers?n.filteredNatHelpers.length?(c(!0),O(le,{key:2},we(e(R),(y,b)=>(c(),N(e(pe),{key:b},{default:t(()=>[a(e(B),{"data-label":e(l)("standalone.nat_helpers.module")},{default:t(()=>[m(i(y.name),1)]),_:2},1032,["data-label"]),a(e(B),{"data-label":e(l)("standalone.nat_helpers.status")},{default:t(()=>[C("div",Nl,[a(k,{icon:["fas",y.enabled?"circle-check":"circle-xmark"],class:Ke(["h-4 w-4",{"text-green-600 dark:text-green-400":y.enabled}]),"aria-hidden":"true"},null,8,["icon","class"]),m(" "+i(y.enabled?e(l)("common.enabled"):e(l)("common.disabled")),1)])]),_:2},1032,["data-label"]),a(e(B),{"data-label":e(l)("standalone.nat_helpers.loaded_on_kernel")},{default:t(()=>[C("div",Sl,[C("span",null,i(y.loaded?e(l)("standalone.nat_helpers.loaded"):e(l)("standalone.nat_helpers.not_loaded")),1),y.enabled&&!y.loaded?(c(),N(e(ve),{key:0},{trigger:t(()=>[a(k,{icon:["fas","triangle-exclamation"],class:"h-4 w-4 text-amber-500"})]),content:t(()=>[C("p",null,i(e(l)("standalone.nat_helpers.enabled_but_not_loaded_tooltip")),1)]),_:1})):!y.enabled&&y.loaded?(c(),N(e(ve),{key:1},{content:t(()=>[C("p",null,i(e(l)("standalone.nat_helpers.disabled_but_loaded_tooltip")),1)]),_:1})):E("",!0)])]),_:2},1032,["data-label"]),a(e(B),{"data-label":e(l)("common.actions")},{default:t(()=>[C("div",Hl,[a(e(z),{kind:"tertiary",onClick:M=>g("editNatHelper",y)},{prefix:t(()=>[a(k,{icon:["fas","pen-to-square"],class:"h-4 w-4","aria-hidden":"true"})]),default:t(()=>[m(" "+i(e(l)("common.edit")),1)]),_:2},1032,["onClick"])])]),_:2},1032,["data-label"])]),_:2},1024))),128)):(c(),N(e(pe),{key:1},{default:t(()=>[a(e(B),{colspan:"4"},{default:t(()=>[a(e(_e),{title:e(l)("standalone.nat_helpers.no_nat_helpers_found"),description:e(l)("common.try_changing_search_filters"),icon:["fas","circle-info"],class:"bg-white dark:bg-gray-950"},{default:t(()=>[a(e(z),{kind:"tertiary",onClick:v[0]||(v[0]=y=>g("clearFilters"))},{default:t(()=>[m(i(e(l)("common.clear_filters")),1)]),_:1})]),_:1},8,["title","description"])]),_:1})]),_:1})):(c(),N(e(pe),{key:0},{default:t(()=>[a(e(B),{colspan:"4"},{default:t(()=>[a(e(_e),{title:e(l)("ne_table.no_items"),icon:["fas","table"],class:"bg-white dark:bg-gray-950"},null,8,["title"])]),_:1})]),_:1}))]),_:1})]),_:1},8,["ariaLabel","loading"])}}}),Cl={class:"space-y-6"},Vl={class:"flex justify-end"},Al=K({__name:"EditNatHelperDrawer",props:{isShown:{type:Boolean,default:!1},natHelper:{}},emits:["close","reloadData"],setup(H,{emit:f}){const n=H,g=f,{t:l}=j(),_=je(),o=qe(),R=s(""),p=s(!0),v=s([]),k=s(new ye),y=s({editNatHelper:!1}),b=s({editNatHelper:"",editNatHelperDetails:""});de(()=>n.isShown,()=>{if(n.isShown&&(M(),n.natHelper)){R.value=n.natHelper.name,p.value=n.natHelper.enabled;const w=[];if(n.natHelper.params){for(let[h,d]of Object.entries(n.natHelper.params))w.push({name:h,value:d});v.value=w}}});function M(){k.value.clear(),b.value.editNatHelper="",b.value.editNatHelperDetails=""}function S(w,h){for(let d of w)d.valid||k.value.set(h,[d.errMessage]);return w.every(d=>d.valid)}function x(){if(M(),!p.value)return!0;const w=[];for(let h of v.value)w.push([[Q(h.value)],h.name]);return w.map(([h,d])=>S(h,d)).every(h=>h)}async function I(){var V;if(!x())return;y.value.editNatHelper=!0;const h=(V=n.natHelper)==null?void 0:V.name,d={name:h,enabled:p.value,params:v.value.reduce((L,A)=>(L[A.name]=A.value,L),{})};try{const A=(await G("ns.nathelpers","edit-nat-helper",d)).data.reboot_needed;let U="",ne="",q="",ae,se="";A?(U=l("standalone.nat_helpers.reboot_to_apply_changes"),ne=l("standalone.nat_helpers.reboot_to_apply_changes_description",{module:h}),q="warning",ae=()=>{o.push(`${Qe()}/system/reboot-and-shutdown`)},se=l("common.go_to_page",{page:l("standalone.reboot_and_shutdown.title")})):(U=l("standalone.nat_helpers.nat_helper_name_saved",{module:h}),q="success"),setTimeout(()=>{_.createNotification({title:U,description:ne,kind:q,secondaryAction:ae,secondaryLabel:se})},500),g("reloadData"),F()}catch(L){console.error(L),L instanceof he?k.value=L.errorBag:(b.value.editNatHelper=l(X(L)),b.value.editNatHelperDetails=L.toString())}finally{y.value.editNatHelper=!1}}function F(){g("close")}function T(w){return Xe(w.replace(/_/g," "))}return(w,h)=>(c(),N(e(ke),{isShown:w.isShown,title:e(l)("standalone.nat_helpers.edit_nat_helper"),closeAriaLabel:e(l)("common.shell.close_side_drawer"),onClose:h[3]||(h[3]=d=>F())},{default:t(()=>[C("form",{onSubmit:h[2]||(h[2]=te(()=>{},["prevent"]))},[C("div",Cl,[a(e(W),{modelValue:R.value,"onUpdate:modelValue":h[0]||(h[0]=d=>R.value=d),label:e(l)("standalone.nat_helpers.module"),disabled:""},null,8,["modelValue","label"]),a(e(Ze),{modelValue:p.value,"onUpdate:modelValue":h[1]||(h[1]=d=>p.value=d),topLabel:e(l)("common.status"),label:p.value?e(l)("common.enabled"):e(l)("common.disabled")},null,8,["modelValue","topLabel","label"]),p.value?(c(!0),O(le,{key:0},we(v.value,d=>(c(),N(e(W),{key:d.name,modelValue:d.value,"onUpdate:modelValue":V=>d.value=V,modelModifiers:{trim:!0},label:T(d.name),invalidMessage:e(l)(k.value.getFirstI18nKeyFor(d.name))},null,8,["modelValue","onUpdate:modelValue","label","invalidMessage"]))),128)):E("",!0),b.value.editNatHelper?(c(),N(e(Y),{key:1,kind:"error",title:e(l)("error.cannot_save_nat_helper"),description:b.value.editNatHelper},J({_:2},[b.value.editNatHelperDetails?{name:"details",fn:t(()=>[m(i(b.value.editNatHelperDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):E("",!0),h[4]||(h[4]=C("hr",{class:"my-8 border-gray-200 dark:border-gray-700"},null,-1)),C("div",Vl,[a(e(z),{kind:"tertiary",size:"lg",onClick:te(F,["prevent"]),disabled:y.value.editNatHelper,class:"mr-3"},{default:t(()=>[m(i(e(l)("common.cancel")),1)]),_:1},8,["disabled"]),a(e(z),{kind:"primary",size:"lg",onClick:te(I,["prevent"]),disabled:y.value.editNatHelper,loading:y.value.editNatHelper},{default:t(()=>[m(i(e(l)("common.save")),1)]),_:1},8,["disabled","loading"])])])],32)]),_:1},8,["isShown","title","closeAriaLabel"]))}}),Tl={class:"mb-8 max-w-2xl text-gray-500 dark:text-gray-400"},Ml={key:1,class:"space-y-6"},$l={class:"flex items-center gap-4"},Fl=K({__name:"NatHelpers",setup(H){const{t:f}=j(),n=s([]),g=s(void 0),l=s(!1),_=s(""),o=s({listNatHelpers:!1}),R=s({listNatHelpers:"",listNatHelpersDetails:""}),p=ee(()=>{const S=/[^a-zA-Z0-9-]/g,x=_.value.replace(S,"");return n.value.filter(I=>new RegExp(x,"i").test(I.name.replace(S,"")))});De(()=>{v()});async function v(){y()}function k(){_.value=""}async function y(){o.value.listNatHelpers=!0,R.value.listNatHelpers="",R.value.listNatHelpersDetails="",n.value=[];try{const S=await G("ns.nathelpers","list-nat-helpers");n.value=S.data.values}catch(S){console.error(S),R.value.listNatHelpers=f(X(S)),R.value.listNatHelpersDetails=S.toString()}finally{o.value.listNatHelpers=!1}}function b(S){g.value=S,l.value=!0}function M(){l.value=!1}return(S,x)=>(c(),O("div",null,[a(e(be),{tag:"h5",class:"mb-2"},{default:t(()=>[m(i(e(f)("standalone.nat_helpers.title")),1)]),_:1}),C("div",Tl,i(e(f)("standalone.nat_helpers.nat_helpers_description")),1),R.value.listNatHelpers?(c(),N(e(Y),{key:0,kind:"error",title:e(f)("error.cannot_retrieve_nat_helpers"),description:R.value.listNatHelpers,class:"mb-5"},J({_:2},[R.value.listNatHelpersDetails?{name:"details",fn:t(()=>[m(i(R.value.listNatHelpersDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):(c(),O("div",Ml,[C("div",$l,[a(e(W),{placeholder:e(f)("standalone.nat_helpers.filter_nat_helpers"),modelValue:_.value,"onUpdate:modelValue":x[0]||(x[0]=I=>_.value=I),modelModifiers:{trim:!0},disabled:o.value.listNatHelpers,class:"max-w-[12rem] sm:max-w-sm"},null,8,["placeholder","modelValue","disabled"]),a(e(z),{kind:"tertiary",onClick:k,disabled:o.value.listNatHelpers},{default:t(()=>[m(i(e(f)("common.clear_filters")),1)]),_:1},8,["disabled"])]),a(Ll,{filteredNatHelpers:p.value,totalNatHelpers:n.value.length,loading:o.value.listNatHelpers,onReloadNatHelpers:v,onEditNatHelper:b,onClearFilters:k},null,8,["filteredNatHelpers","totalNatHelpers","loading"])])),a(Al,{natHelper:g.value,isShown:l.value,onClose:M,onReloadData:v},null,8,["natHelper","isShown"])]))}}),Kl=K({__name:"NatView",setup(H){const{t:f}=j(),{tabs:n,selectedTab:g}=el([{name:"nat",label:f("standalone.nat.rules_and_netmap")},{name:"natHelpers",label:f("standalone.nat_helpers.title")}]);return(l,_)=>(c(),O("div",null,[a(e(be),{tag:"h3",class:"mb-7"},{default:t(()=>[m(i(e(f)("standalone.nat.title")),1)]),_:1}),a(e(We),{tabs:e(n),selected:e(g),srTabsLabel:e(f)("ne_tabs.tabs"),srSelectTabLabel:e(f)("ne_tabs.select_a_tab"),onSelectTab:_[0]||(_[0]=o=>g.value=o),class:"mb-8"},null,8,["tabs","selected","srTabsLabel","srSelectTabLabel"]),e(g)==="nat"?(c(),O(le,{key:0},[a(pl),a(xl,{class:"mt-12"})],64)):e(g)==="natHelpers"?(c(),N(Fl,{key:1})):E("",!0)]))}});export{Kl as default};
