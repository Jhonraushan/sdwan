import{aO as Ja,d as Me,u as Ve,U as Re,r as o,c as ae,J as Ce,h as t,i as B,w,j as u,k as p,l as e,Z as F,Q as le,n as y,L as xe,m as N,t as v,R as Ue,_ as J,ai as Aa,T as j,e as fe,V as se,S as be,aM as Wa,aP as Xa,aQ as ei,M as Le,Y as pa,g as Sa,q as _,ar as He,a0 as ca,z as Z,a1 as Ca,ad as de,aA as Se,aR as Ie,s as Ra,a7 as Na,a6 as ua,N as ai,y as Ma,a4 as Va,aS as ii,aT as Ea,aU as ni,aV as ti,a3 as li,aW as si,aX as oi,ap as Ze,o as ri,b as di,X as Ua,W as Pa,F as De,av as Be,B as la,aY as za}from"./index-BlEQ5104.js";import{_ as ja}from"./NeMultiTextInput.vue_vue_type_script_setup_true_lang-DwfeP71-.js";import{u as Fa}from"./uniq-DGkY_-95.js";import{g as ci,a as Ya,b as Y,i as we,c as ge,d as te,e as va,f as Ee,h as ui,j as Ge,k as fa,l as sa,m as oa,n as $e,o as ra,p as qa,q as $a,r as Ha,s as Ga,t as fi,u as da,v as vi,w as pi,x as _i,y as xa}from"./network-qu7sidyZ.js";import{b as mi,c as Qa}from"./cloneDeep-CNXUQFZv.js";import{z as Za}from"./firewall-C9mbeSo1.js";import"./isArrayLikeObject-CpCvCe5A.js";import"./_initCloneObject-z8l5qNBF.js";var bi=4;function gi(k){return mi(k,bi)}function Ta(k){return Ja(k).toUpperCase()}const yi={class:"space-y-6"},wi={class:"flex justify-end"},ki=Me({__name:"CreateOrEditAliasInterfaceDrawer",props:{iface:{type:Object,required:!0},networkConfigDevice:{type:Object,required:!0},networkConfig:{type:Object,required:!0},aliasToEdit:{type:Object,default:null},isShown:{type:Boolean,default:!1}},emits:["close","reloadData"],setup(k,{emit:D}){const r=k,z=D,{t:a}=Ve(),K=Re();let x=o(""),s=o(),g=o(),M=o([""]),m=o([""]);const S=ae(()=>M.value.some(V=>V!="")),ee=ae(()=>m.value.some(V=>V!=""));let q=o({create:!1}),O=o({notificationTitle:"",notificationDescription:"",interfaceName:"",ipv4Addresses:[],ipv6Addresses:[],ipv4AddressList:"",ipv6AddressList:""});const E=ae(()=>!r.aliasToEdit),I=ae(()=>{var V;return((V=r.networkConfigDevice)==null?void 0:V.ipv6)==="1"});Ce(()=>r.isShown,()=>{r.isShown&&(oe(),E.value?(x.value="al_"+r.iface[".name"],M.value=[""],m.value=[""],j(s)):(x.value=r.aliasToEdit[".name"],M.value=r.aliasToEdit.ipaddr||[""],m.value=r.aliasToEdit.ip6addr||[""],j(g)))});function Q(){z("close")}function oe(){for(const[V,R]of Object.entries(O.value))typeof R=="string"?O.value[V]="":Array.isArray(R)&&(O.value[V]=[])}function W(){oe();let V=!0;{let{valid:R,errMessage:h}=be(x.value);if(!R)O.value.interfaceName=a(h),V&&(V=!1,j(s));else{{let{valid:T,errMessage:U,i18Params:A}=Wa(x.value,15);T||(O.value.interfaceName=a(U,A),V&&(V=!1,j(s)))}E.value&&r.networkConfig.interface.find(U=>U[".name"]===x.value)&&(O.value.interfaceName=a("standalone.interfaces_and_devices.interface_name_already_used"),V&&(V=!1,j(s)))}}if(I.value?!S.value&&!ee.value&&(V=!1,!O.value.ipv4AddressList&&!O.value.ipv6AddressList&&(O.value.ipv4AddressList=a("standalone.interfaces_and_devices.enter_one_ipv4_or_ipv6_address"),O.value.ipv6AddressList=a("standalone.interfaces_and_devices.enter_one_ipv4_or_ipv6_address"))):S.value||(O.value.ipv4AddressList=a("standalone.interfaces_and_devices.enter_ipv4_address"),V&&(V=!1,j(g))),!I.value||S.value||!ee.value)for(let R=0;R<M.value.length;R++){const h=M.value[R];{let{valid:T,errMessage:U}=be(h);if(!T)O.value.ipv4Addresses[R]=a(U),V=!1;else{let{valid:A,errMessage:ie}=Xa(h);A||(O.value.ipv4Addresses[R]=a(ie),V=!1)}}}if(I.value&&(ee.value||!S.value))for(let R=0;R<m.value.length;R++){const h=m.value[R];{let{valid:T,errMessage:U}=be(h);if(!T)O.value.ipv6Addresses[R]=a(U),V=!1;else{let{valid:A,errMessage:ie}=ei(h);A||(O.value.ipv6Addresses[R]=a(ie),V=!1)}}}return V}async function ce(){if(!W())return;q.value.create=!0;const R=E.value?"create-alias-interface":"edit-alias-interface";try{await fe("ns.devices",R,{alias_iface_name:x.value,parent_iface_name:r.iface[".name"],ip4_addresses:Fa(M.value).filter(h=>h!=""),ip6_addresses:Fa(m.value).filter(h=>h!="")}),z("reloadData"),Q()}catch(h){console.error(h),O.value.notificationTitle=a("standalone.interfaces_and_devices.cannot_save_alias_interface"),O.value.notificationDescription=a(se(h))}finally{q.value.create=!1,await K.getChanges()}}return(V,R)=>(t(),B(e(Aa),{isShown:k.isShown,title:E.value?e(a)("standalone.interfaces_and_devices.create_alias_for_interface",{interface:k.iface[".name"]}):e(a)("standalone.interfaces_and_devices.edit_alias_interface"),closeAriaLabel:e(a)("common.shell.close_side_drawer"),onClose:Q},{default:w(()=>[u("form",null,[u("div",yi,[p(e(le),{label:e(a)("standalone.interfaces_and_devices.name"),modelValue:e(x),"onUpdate:modelValue":R[0]||(R[0]=h=>F(x)?x.value=h:x=h),modelModifiers:{trim:!0},invalidMessage:e(a)(e(O).interfaceName),disabled:e(q).create||!E.value,ref_key:"nameRef",ref:s},null,8,["label","modelValue","invalidMessage","disabled"]),p(ja,{title:e(a)("standalone.interfaces_and_devices.ipv4_address_cidr"),"add-item-label":e(a)("standalone.interfaces_and_devices.add_ip_address"),modelValue:e(M),"onUpdate:modelValue":R[1]||(R[1]=h=>F(M)?M.value=h:M=h),"invalid-messages":e(O).ipv4Addresses,"general-invalid-message":e(O).ipv4AddressList,ref_key:"ipv4AddressRef",ref:g,required:!0},null,8,["title","add-item-label","modelValue","invalid-messages","general-invalid-message"]),I.value?(t(),B(ja,{key:0,title:e(a)("standalone.interfaces_and_devices.ipv6_address_cidr"),"add-item-label":e(a)("standalone.interfaces_and_devices.add_ip_address"),modelValue:e(m),"onUpdate:modelValue":R[2]||(R[2]=h=>F(m)?m.value=h:m=h),"invalid-messages":e(O).ipv6Addresses,"general-invalid-message":e(O).ipv6AddressList,required:!0},null,8,["title","add-item-label","modelValue","invalid-messages","general-invalid-message"])):y("",!0),e(O).notificationTitle?(t(),B(e(xe),{key:1,kind:"error",title:e(O).notificationTitle,description:e(O).notificationDescription},null,8,["title","description"])):y("",!0)]),R[3]||(R[3]=u("hr",{class:"my-8 border-gray-200 dark:border-gray-700"},null,-1)),u("div",wi,[p(e(J),{kind:"tertiary",size:"lg",onClick:Ue(Q,["prevent"]),disabled:e(q).create,class:"mr-3"},{default:w(()=>[N(v(e(a)("common.cancel")),1)]),_:1},8,["disabled"]),p(e(J),{kind:"primary",size:"lg",onClick:Ue(ce,["prevent"]),disabled:e(q).create,loading:e(q).create},{default:w(()=>[N(v(E.value?e(a)("standalone.interfaces_and_devices.create_alias"):e(a)("standalone.interfaces_and_devices.save_alias")),1)]),_:1},8,["disabled","loading"])])])]),_:1},8,["isShown","title","closeAriaLabel"]))}}),hi=Me({__name:"DeleteAliasModal",props:{visible:{type:Boolean,default:!1},alias:{type:Object,required:!0},parentInterface:{type:Object,required:!0}},emits:["close","reloadData"],setup(k,{emit:D}){const r=k,z=D,{t:a}=Ve(),K=Re();let x=o({deleteAlias:!1}),s=o({notificationTitle:"",notificationDescription:"",notificationDetails:""});Ce(()=>r.visible,()=>{r.visible&&(s.value.notificationTitle="",s.value.notificationDescription="")});function g(){z("close")}async function M(){s.value.notificationTitle="",s.value.notificationDescription="",s.value.notificationDetails="",x.value.deleteAlias=!0;try{await fe("ns.devices","delete-alias-interface",{alias_iface_name:r.alias[".name"],parent_iface_name:r.parentInterface[".name"]}),z("reloadData"),z("close")}catch(m){console.error(m),s.value.notificationTitle=a("standalone.interfaces_and_devices.cannot_delete_alias_interface"),s.value.notificationDescription=a(se(m)),s.value.notificationDetails=m.toString()}finally{x.value.deleteAlias=!1,await K.getChanges()}}return(m,S)=>(t(),B(e(pa),{visible:k.visible,title:e(a)("standalone.interfaces_and_devices.delete_alias"),kind:"warning",primaryLabel:e(a)("standalone.interfaces_and_devices.delete_alias"),cancelLabel:e(a)("common.cancel"),primaryButtonKind:"danger",primaryButtonDisabled:e(x).deleteAlias,primaryButtonLoading:e(x).deleteAlias,closeAriaLabel:e(a)("common.close"),onClose:g,onPrimaryClick:M},{default:w(()=>[u("div",null,v(e(a)("standalone.interfaces_and_devices.delete_alias_interface_name",{name:k.alias[".name"]})),1),e(s).notificationTitle?(t(),B(e(xe),{key:0,kind:"error",title:e(s).notificationTitle,description:e(s).notificationDescription,class:"mt-4"},Le({_:2},[e(s).notificationDetails?{name:"details",fn:w(()=>[N(v(e(s).notificationDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):y("",!0)]),_:1},8,["visible","title","primaryLabel","cancelLabel","primaryButtonDisabled","primaryButtonLoading","closeAriaLabel"]))}}),Di={class:"space-y-6"},Ci={key:1},xi={class:"grid grid-cols-2 gap-3 lg:grid-cols-3"},Mi={class:"space-y-6"},Vi={key:1},Ti={class:"space-y-6"},Ai={class:"space-y-6"},Si={class:"space-y-6"},Ii={class:"space-y-6"},Li={class:"flex justify-end"},Oi=Me({__name:"ConfigureDeviceDrawer",props:{device:{type:Object,required:!0},deviceType:{type:String,required:!0},allDevices:{type:Array,required:!0},networkConfig:{type:Object,required:!0},interfaceToEdit:{type:Object,default:null},isShown:{type:Boolean,default:!1}},emits:["close","reloadData"],setup(k,{emit:D}){const r=k,z=D,{t:a}=Ve(),K=Re();let x=o([]),s=o(""),g=o(),M=o("lan"),m=o("static"),S=o(""),ee=o(),q=o(""),O=o(),E=o(!1),I=o(!1),Q=o(""),oe=o(),W=o(""),ce=o(),V=o(""),R=o(),h=o(""),T=o(),U=o("deviceHostname"),A=o(""),ie=o(),X=o(""),P=o(),ve=o(""),_a=o(),ke=o(""),ma=o(),ne=o(""),ba=o(),$=o("bridge"),Pe=o(),re=o([]),Ke=o(),pe=o("balance-rr"),ga=o(),_e=o(""),ze=o(),Te=o([]),We=[{id:"static",label:a("standalone.interfaces_and_devices.protocol_static")},{id:"dhcp",label:"DHCP"},{id:"dhcpv6",label:"DHCPv6"}],ya={id:"pppoe",label:"PPPoE"};const wa=[{id:"deviceHostname",label:a("standalone.interfaces_and_devices.dhcp_hostname_device")},{id:"doNotSendHostname",label:a("standalone.interfaces_and_devices.dhcp_hostname_do_not_send")},{id:"customHostname",label:a("standalone.interfaces_and_devices.dhcp_hostname_custom")}],Xe=[{id:"bridge",label:a("standalone.interfaces_and_devices.bridge")},{id:"bond",label:a("standalone.interfaces_and_devices.bond")}],Ye=[{id:"balance-rr",label:a("standalone.interfaces_and_devices.bond_balance_rr"),description:"balance-rr (0)"},{id:"active-backup",label:a("standalone.interfaces_and_devices.bond_active_backup"),description:"active-backup (1)"},{id:"balance-xor",label:a("standalone.interfaces_and_devices.bond_balance_xor"),description:"balance-xor (2)"},{id:"broadcast",label:a("standalone.interfaces_and_devices.bond_broadcast"),description:"broadcast (3)"},{id:"802.3ad",label:a("standalone.interfaces_and_devices.bond_8023ad"),description:"802.3ad (4)"},{id:"balance-tlb",label:a("standalone.interfaces_and_devices.bond_balance_tlb"),description:"balance-tlb (5)"},{id:"balance-alb",label:a("standalone.interfaces_and_devices.bond_balance_alb"),description:"balance-alb (6)"}];let H=o({configure:!1,listZonesForDeviceConfig:!1}),C=o({notificationTitle:"",notificationDescription:"",notificationDetails:"",interfaceName:"",ipv4Address:"",ipv4Gateway:"",ipv6Address:"",ipv6Gateway:"",ipv4Mtu:"",ipv6Mtu:"",dhcpCustomHostname:"",dhcpClientId:"",dhcpVendorClass:"",pppoeUsername:"",pppoePassword:"",selectedDevicesForBridgeOrBond:"",bondingPolicy:"",bondPrimaryDevice:""});const Qe=ae(()=>Te.value.map(d=>({id:d.name,label:Ta(d.name),description:ci(d.name),icon:Ya(d.name)}))),Je=ae(()=>M.value==="wan"?[...We,ya]:We),Ae=ae(()=>!r.interfaceToEdit),je=ae(()=>r.deviceType==="logical"&&$.value==="bond"),Ne=ae(()=>x.value.filter(l=>!["lo","ifb-dns"].includes(Y(l))&&!ka.value.includes(Y(l))&&!we(l)&&!ge(l)&&!te(l)).map(l=>{const L=r.networkConfig.interface.filter(i=>i.device===Y(l)).map(i=>i[".name"]);let f="";return ge(l)?f=`(${a("standalone.interfaces_and_devices.bond")})`:L&&(f=L.join(", ")),{id:Y(l),label:Y(l),description:f}})),ka=ae(()=>{const d=[];return x.value.forEach(l=>{Y(l)!=Y(r.device)&&(ge(l)?d.push(...l.slaves):we(l)&&d.push(...l.ports))}),d}),ha=ae(()=>Ae.value?$.value==="bond"?a("standalone.interfaces_and_devices.create_bond"):r.device.proto==="bonding"?a("standalone.interfaces_and_devices.configure_bond"):a("standalone.interfaces_and_devices.configure_interface"):a("standalone.interfaces_and_devices.reconfigure_interface")),ea=ae(()=>{if(r.deviceType==="physical")if(r.device.proto==="bonding"){const d=r.device.name.split("bond-")[1];return a("standalone.interfaces_and_devices.configure_bond_name",{name:d})}else return a("standalone.interfaces_and_devices.configure_interface_for_name",{name:r.device.name});else return a("standalone.interfaces_and_devices.create_logical_interface")});Ce($,()=>{if($.value=="bond"){const d=Math.ceil(1),l=Math.floor(255),L=Math.floor(Math.random()*(l-d)+d),f=Math.floor(Math.random()*(l-d)+d);S.value=`127.${L}.${f}.1/32`}else S.value=""},{immediate:!0}),Ce(()=>r.isShown,()=>{var d,l,L,f,i;if(r.isShown)if(aa(),ta(),x.value=Qa(r.allDevices),Ae.value)s.value="",M.value="lan",m.value="static",S.value="",q.value="",E.value=!1,Q.value="",W.value="",I.value=!1,V.value="",h.value="",U.value="deviceHostname",A.value="",X.value="",ve.value="",ke.value="",ne.value="",$.value="bridge",re.value=[],pe.value="balance-rr",_e.value="",r.deviceType==="physical"?j(g):j(Pe);else{if(va(r.interfaceToEdit)?(s.value="",j(g)):s.value=r.interfaceToEdit[".name"],va(r.interfaceToEdit)?(m.value="static",S.value=""):(m.value=r.interfaceToEdit.proto,S.value=r.interfaceToEdit.ipaddr||""),q.value=r.interfaceToEdit.gateway||"",((d=r.device)==null?void 0:d.ipv6)==="1"||r.interfaceToEdit.proto==="pppoe"&&((l=r.device)==null?void 0:l.ipv6)==="auto"?E.value=!0:E.value=!1,Q.value=r.interfaceToEdit.ip6addr?r.interfaceToEdit.ip6addr:"",W.value=r.interfaceToEdit.ip6gw||"",I.value=!1,V.value=(L=r.device)!=null&&L.mtu?(f=r.device)==null?void 0:f.mtu.toString():"",h.value=((i=r.device)==null?void 0:i.mtu6)||"",X.value=r.interfaceToEdit.clientid||"",ve.value=r.interfaceToEdit.vendorid||"",ke.value=r.interfaceToEdit.username||"",ne.value=r.interfaceToEdit.password||"",r.deviceType==="logical")if(we(r.device))$.value="bridge",re.value=Ne.value.filter(c=>r.device.ports.includes(c.id));else{$.value="bond";const c=r.device;re.value=Ne.value.filter(b=>c.slaves.includes(b.id)),pe.value=c.bonding_policy,_e.value=c.primary}switch(r.interfaceToEdit.hostname){case"*":U.value="doNotSendHostname",A.value="";break;case void 0:U.value="deviceHostname",A.value="";break;default:U.value="customHostname",A.value=r.interfaceToEdit.hostname}}}),Ce(M,()=>{M.value!=="wan"&&m.value==="pppoe"&&(m.value="static")}),Ce($,()=>{$.value==="bond"&&(m.value="static",E.value=!1,M.value==="wan"&&(M.value="lan"))});function Fe(){z("close")}function aa(){for(const[d,l]of Object.entries(C.value))typeof l=="string"?C.value[d]="":Array.isArray(l)&&(C.value[d]=[])}function Da(){const d={device_type:r.deviceType,interface_name:s.value,protocol:m.value,zone:M.value,ip6_enabled:E.value};return r.device.name&&(d.device_name=r.device.name),r.interfaceToEdit&&(d.interface_to_edit=r.interfaceToEdit[".name"]),S.value&&(d.ip4_address=S.value),q.value&&(d.ip4_gateway=q.value),V.value&&(d.ip4_mtu=V.value),Q.value&&(d.ip6_address=Q.value),W.value&&(d.ip6_gateway=W.value),h.value&&(d.ip6_mtu=h.value),r.deviceType==="logical"&&(d.logical_type=$.value,d.attached_devices=re.value.map(l=>l.id)),r.deviceType==="logical"&&$.value==="bond"&&(d.bonding_policy=pe.value,d.bond_primary_device=_e.value,delete d.zone),m.value==="pppoe"&&(d.pppoe_username=ke.value,d.pppoe_password=ne.value),["dhcp","dhcpv6"].includes(m.value)&&(d.dhcp_client_id=X.value,d.dhcp_vendor_class=ve.value,d.dhcp_hostname_to_send=U.value,d.dhcp_custom_hostname=A.value),d}async function ia(){if(C.value.notificationTitle="",C.value.notificationDescription="",C.value.notificationDetails="",!na())return;H.value.configure=!0;const l=Da();try{await fe("ns.devices","configure-device",l),z("reloadData"),Fe()}catch(L){console.error(L),C.value.notificationTitle=a("standalone.interfaces_and_devices.cannot_configure_device"),C.value.notificationDescription=a(se(L)),C.value.notificationDetails=L.toString()}finally{H.value.configure=!1,await K.getChanges()}}function na(){aa();let d=!0;if(r.deviceType==="logical"&&(Va(re.value)&&(C.value.selectedDevicesForBridgeOrBond=a("standalone.interfaces_and_devices.select_one_or_more_devices"),d&&(d=!1,j(Ke))),$.value==="bond"&&["active-backup","balance-tlb","balance-alb"].includes(pe.value))){let{valid:l,errMessage:L}=be(_e.value);l?re.value.find(i=>i.id===_e.value)||(C.value.bondPrimaryDevice=a("standalone.interfaces_and_devices.primary_device_not_included"),d&&(d=!1,j(ze))):(C.value.bondPrimaryDevice=a(L),d&&(d=!1,j(ze)))}{let{valid:l,errMessage:L}=be(s.value);if(!l)C.value.interfaceName=a(L),d&&(d=!1,j(g));else{if(Ae.value){let f=13;$.value=="bond"&&(f=10),m.value=="pppoe"&&(f=5);let{valid:i,errMessage:c,i18Params:b}=Wa(s.value,f);i||(C.value.interfaceName=a(c,b),d&&(d=!1,j(g)))}else m.value=="pppoe"&&s.value.length>5&&(C.value.interfaceName=a("standalone.interfaces_and_devices.pppoe_name_too_long_need_reconfiguration",{num:5}),d&&(d=!1,j(g)));Ae.value&&r.networkConfig.interface.find(i=>i[".name"]===s.value)&&(C.value.interfaceName=a("standalone.interfaces_and_devices.interface_name_already_used"),d&&(d=!1,j(g)))}}if(m.value==="static"){if(!E.value){let{valid:l,errMessage:L}=be(S.value);l||(C.value.ipv4Address=a(L),d&&(d=!1,j(ee)))}if(S.value){let{valid:l,errMessage:L}=Xa(S.value);l||(C.value.ipv4Address=a(L),d&&(d=!1,j(ee)))}if(M.value==="wan"&&S.value){let{valid:l,errMessage:L}=be(q.value);if(!l)C.value.ipv4Gateway=a(L),d&&(d=!1,j(O));else{let{valid:f,errMessage:i}=ii(q.value);f||(C.value.ipv4Gateway=a(i),d&&(d=!1,j(O)))}}if(E.value){if(Q.value){let{valid:l,errMessage:L}=Ea(Q.value);l||(C.value.ipv6Address=a(L),d&&(d=!1,j(oe)))}if(M.value==="wan"){let{valid:l,errMessage:L}=be(W.value);if(!l)C.value.ipv6Gateway=a(L),d&&(d=!1,j(ce));else{let{valid:f,errMessage:i}=Ea(W.value);f||(C.value.ipv6Gateway=a(i),d&&(d=!1,j(ce)))}}if(h.value){let{valid:l,errMessage:L}=ni(h.value);l||(I.value=!0,C.value.ipv6Mtu=a(L),d&&(d=!1,j(T)))}}}else if(["dhcp","dhcpv6"].includes(m.value)){if(X.value){let{valid:l,errMessage:L}=ti(X.value);l||(I.value=!0,C.value.dhcpClientId=a(L),d&&(d=!1,j(P)))}if(m.value==="dhcp"&&U.value==="customHostname"){let{valid:l,errMessage:L}=be(A.value);if(!l)C.value.dhcpCustomHostname=a(L),d&&(d=!1,j(ie));else{let{valid:f,errMessage:i,i18Params:c}=li(A.value);f||(C.value.dhcpCustomHostname=a(i,c),d&&(d=!1,j(ie)))}}}if(V.value){let{valid:l,errMessage:L}=si(V.value);l||(I.value=!0,C.value.ipv4Mtu=a(L),d&&(d=!1,j(R)))}return d}async function ta(){H.value.listZonesForDeviceConfig=!0;try{const d=await fe("ns.devices","list-zones-for-device-config");Te.value=d.data.zones;const l=Te.value.find(L=>{var f;return(f=L.network)==null?void 0:f.includes(s.value)});l&&(M.value=l.name)}catch(d){console.error(d),C.value.notificationTitle=a("error.cannot_retrieve_zones_for_device_configuration"),C.value.notificationDescription=a(se(d)),C.value.notificationDetails=d.toString()}H.value.listZonesForDeviceConfig=!1}return(d,l)=>{const L=Sa("font-awesome-icon");return t(),B(e(Aa),{isShown:k.isShown,title:ea.value,closeAriaLabel:e(a)("common.shell.close_side_drawer"),onClose:Fe},{default:w(()=>[u("form",null,[u("div",Di,[k.deviceType==="logical"?(t(),_(Z,{key:0},[p(e(He),{modelValue:e($),"onUpdate:modelValue":l[0]||(l[0]=f=>F($)?$.value=f:$=f),label:e(a)("standalone.interfaces_and_devices.logical_type"),options:Xe,disabled:!Ae.value||e(H).configure,ref_key:"logicalIfaceTypeRef",ref:Pe},null,8,["modelValue","label","disabled"]),p(e(ca),{multiple:"",modelValue:e(re),"onUpdate:modelValue":l[1]||(l[1]=f=>F(re)?re.value=f:re=f),options:Ne.value,label:e(a)("standalone.interfaces_and_devices.devices"),placeholder:e($)==="bond"?e(a)("standalone.interfaces_and_devices.select_devices_for_bond"):e(a)("standalone.interfaces_and_devices.select_devices_for_bridge"),invalidMessage:e(C).selectedDevicesForBridgeOrBond,noResultsLabel:e(a)("ne_combobox.no_results"),limitedOptionsLabel:e(a)("ne_combobox.limited_options_label"),noOptionsLabel:e(a)("standalone.interfaces_and_devices.no_devices_available"),disabled:e(H).configure,ref_key:"selectedDevicesForBridgeOrBondRef",ref:Ke,"selected-label":e(a)("ne_combobox.selected"),"user-input-label":e(a)("ne_combobox.user_input_label"),optionalLabel:e(a)("common.optional")},null,8,["modelValue","options","label","placeholder","invalidMessage","noResultsLabel","limitedOptionsLabel","noOptionsLabel","disabled","selected-label","user-input-label","optionalLabel"]),e($)==="bond"?(t(),B(e(ca),{key:0,modelValue:e(pe),"onUpdate:modelValue":l[2]||(l[2]=f=>F(pe)?pe.value=f:pe=f),options:Ye,label:e(a)("standalone.interfaces_and_devices.bonding_policy"),invalidMessage:e(C).bondingPolicy,noResultsLabel:e(a)("ne_combobox.no_results"),limitedOptionsLabel:e(a)("ne_combobox.limited_options_label"),disabled:e(H).configure,ref_key:"bondingPolicyRef",ref:ga,noOptionsLabel:e(a)("ne_combobox.no_options_label"),"selected-label":e(a)("ne_combobox.selected"),"user-input-label":e(a)("ne_combobox.user_input_label"),optionalLabel:e(a)("common.optional")},null,8,["modelValue","label","invalidMessage","noResultsLabel","limitedOptionsLabel","disabled","noOptionsLabel","selected-label","user-input-label","optionalLabel"])):y("",!0),e($)==="bond"&&["active-backup","balance-tlb","balance-alb"].includes(e(pe))?(t(),B(e(ca),{key:1,modelValue:e(_e),"onUpdate:modelValue":l[3]||(l[3]=f=>F(_e)?_e.value=f:_e=f),options:e(re),label:e(a)("standalone.interfaces_and_devices.bond_primary_device"),invalidMessage:e(C).bondPrimaryDevice,noResultsLabel:e(a)("ne_combobox.no_results"),limitedOptionsLabel:e(a)("ne_combobox.limited_options_label"),disabled:e(H).configure,ref_key:"bondPrimaryDeviceRef",ref:ze,noOptionsLabel:e(a)("ne_combobox.no_options_label"),"selected-label":e(a)("ne_combobox.selected"),"user-input-label":e(a)("ne_combobox.user_input_label"),optionalLabel:e(a)("common.optional")},null,8,["modelValue","options","label","invalidMessage","noResultsLabel","limitedOptionsLabel","disabled","noOptionsLabel","selected-label","user-input-label","optionalLabel"])):y("",!0)],64)):y("",!0),p(e(le),{label:je.value?e(a)("standalone.interfaces_and_devices.bond_name"):e(a)("standalone.interfaces_and_devices.interface_name"),modelValue:e(s),"onUpdate:modelValue":l[4]||(l[4]=f=>F(s)?s.value=f:s=f),modelModifiers:{trim:!0},invalidMessage:e(a)(e(C).interfaceName),disabled:!Ae.value||e(H).configure,ref_key:"interfaceNameRef",ref:g},null,8,["label","modelValue","invalidMessage","disabled"]),e(H).listZonesForDeviceConfig?(t(),_("div",Ci,[p(e(Ca),null,{default:w(()=>[N(v(e(a)("standalone.interfaces_and_devices.zone")),1)]),_:1}),u("div",xi,[(t(),_(Z,null,de(3,f=>p(e(ai),{key:f,skeletonLines:1},{default:w(()=>[p(e(Ma),{size:"sm",lines:2})]),_:2},1024)),64))])])):je.value?y("",!0):(t(),B(e(He),{key:2,modelValue:e(M),"onUpdate:modelValue":l[5]||(l[5]=f=>F(M)?M.value=f:M=f),card:"",label:e(a)("standalone.interfaces_and_devices.zone"),options:Qe.value,gridStyle:"gap-3 grid-cols-2 lg:grid-cols-3"},null,8,["modelValue","label","options"])),k.deviceType==="logical"&&e($)==="bond"?y("",!0):(t(),B(e(He),{key:3,modelValue:e(m),"onUpdate:modelValue":l[6]||(l[6]=f=>F(m)?m.value=f:m=f),label:e(a)("standalone.interfaces_and_devices.protocol"),options:Je.value},null,8,["modelValue","label","options"])),Se(u("div",Mi,[p(e(le),{label:e($)==="bond"?e(a)("standalone.interfaces_and_devices.management_ipv4_address_cidr"):e(a)("standalone.interfaces_and_devices.ipv4_address_cidr"),modelValue:e(S),"onUpdate:modelValue":l[7]||(l[7]=f=>F(S)?S.value=f:S=f),modelModifiers:{trim:!0},invalidMessage:e(a)(e(C).ipv4Address),disabled:e(H).configure||e($)=="bond",ref_key:"ipv4AddressRef",ref:ee},Le({_:2},[e($)==="bond"?{name:"tooltip",fn:w(()=>[p(e(Ra),null,{content:w(()=>[N(v(e(a)("standalone.interfaces_and_devices.management_ipv4_address_cidr_tooltip")),1)]),_:1})]),key:"0"}:void 0]),1032,["label","modelValue","invalidMessage","disabled"]),e(M)==="wan"?(t(),B(e(le),{key:0,label:e(a)("standalone.interfaces_and_devices.ipv4_gateway"),modelValue:e(q),"onUpdate:modelValue":l[8]||(l[8]=f=>F(q)?q.value=f:q=f),modelModifiers:{trim:!0},invalidMessage:e(a)(e(C).ipv4Gateway),disabled:e(H).configure,ref_key:"ipv4GatewayRef",ref:O},null,8,["label","modelValue","invalidMessage","disabled"])):y("",!0),k.deviceType==="logical"&&e($)==="bond"?y("",!0):(t(),_("div",Vi,[p(e(Ca),null,{default:w(()=>[N(v(e(a)("standalone.interfaces_and_devices.ipv6")),1)]),_:1}),p(e(Na),{modelValue:e(E),"onUpdate:modelValue":l[9]||(l[9]=f=>F(E)?E.value=f:E=f),label:e(a)("standalone.interfaces_and_devices.enable_ipv6"),disabled:e(H).configure},null,8,["modelValue","label","disabled"])])),Se(u("div",Ti,[p(e(le),{label:e(a)("standalone.interfaces_and_devices.ipv6_address"),modelValue:e(Q),"onUpdate:modelValue":l[10]||(l[10]=f=>F(Q)?Q.value=f:Q=f),modelModifiers:{trim:!0},invalidMessage:e(a)(e(C).ipv6Address),disabled:e(H).configure,ref_key:"ipv6AddressRef",ref:oe},{tooltip:w(()=>[p(e(Ra),null,{content:w(()=>[N(v(e(a)("standalone.interfaces_and_devices.ipv6_address_tooltip")),1)]),_:1})]),_:1},8,["label","modelValue","invalidMessage","disabled"]),e(M)==="wan"?(t(),B(e(le),{key:0,label:e(a)("standalone.interfaces_and_devices.ipv6_gateway"),modelValue:e(W),"onUpdate:modelValue":l[11]||(l[11]=f=>F(W)?W.value=f:W=f),modelModifiers:{trim:!0},invalidMessage:e(a)(e(C).ipv6Gateway),disabled:e(H).configure,ref_key:"ipv6GatewayRef",ref:ce},null,8,["label","modelValue","invalidMessage","disabled"])):y("",!0)],512),[[Ie,e(E)]])],512),[[Ie,["static","bonding"].includes(e(m))]]),Se(u("div",Ai,[u("div",null,[p(e(Ca),null,{default:w(()=>[N(v(e(a)("standalone.interfaces_and_devices.ipv6")),1)]),_:1}),p(e(Na),{modelValue:e(E),"onUpdate:modelValue":l[12]||(l[12]=f=>F(E)?E.value=f:E=f),label:e(a)("standalone.interfaces_and_devices.enable_ipv6"),disabled:e(H).configure},null,8,["modelValue","label","disabled"])]),p(e(le),{label:e(a)("standalone.interfaces_and_devices.pppoe_username"),modelValue:e(ke),"onUpdate:modelValue":l[13]||(l[13]=f=>F(ke)?ke.value=f:ke=f),modelModifiers:{trim:!0},invalidMessage:e(a)(e(C).pppoeUsername),disabled:e(H).configure,ref_key:"pppoeUsernameRef",ref:ma},null,8,["label","modelValue","invalidMessage","disabled"]),p(e(le),{label:e(a)("standalone.interfaces_and_devices.pppoe_password"),modelValue:e(ne),"onUpdate:modelValue":l[14]||(l[14]=f=>F(ne)?ne.value=f:ne=f),isPassword:"",showPasswordLabel:e(a)("ne_text_input.show_password"),hidePasswordLabel:e(a)("ne_text_input.hide_password"),invalidMessage:e(a)(e(C).pppoePassword),ref_key:"pppoePasswordRef",ref:ba},null,8,["label","modelValue","showPasswordLabel","hidePasswordLabel","invalidMessage"])],512),[[Ie,e(m)==="pppoe"]]),Se(u("div",Si,[p(e(He),{modelValue:e(U),"onUpdate:modelValue":l[15]||(l[15]=f=>F(U)?U.value=f:U=f),label:e(a)("standalone.interfaces_and_devices.dhcp_hostname_to_send_label"),options:wa},null,8,["modelValue","label"]),e(U)==="customHostname"?(t(),B(e(le),{key:0,modelValue:e(A),"onUpdate:modelValue":l[16]||(l[16]=f=>F(A)?A.value=f:A=f),placeholder:e(a)("standalone.interfaces_and_devices.custom_hostname"),invalidMessage:e(a)(e(C).dhcpCustomHostname),ref_key:"dhcpCustomHostnameRef",ref:ie,class:"!mt-4 ml-6"},null,8,["modelValue","placeholder","invalidMessage"])):y("",!0)],512),[[Ie,e(m)==="dhcp"]]),e(m)!=="pppoe"&&!(k.deviceType==="logical"&&e($)==="bond")?(t(),_(Z,{key:4},[p(e(J),{kind:"tertiary",size:"sm",onClick:l[17]||(l[17]=f=>F(I)?I.value=!e(I):I=!e(I)),class:"-ml-2"},{suffix:w(()=>[p(L,{icon:["fas",e(I)?"chevron-up":"chevron-down"],class:"h-3 w-3","aria-hidden":"true"},null,8,["icon"])]),default:w(()=>[N(" "+v(e(a)("common.advanced_settings")),1)]),_:1}),p(ua,{name:"slide-down"},{default:w(()=>[Se(u("div",Ii,[p(e(le),{label:e(a)("standalone.interfaces_and_devices.ipv4_mtu_bytes"),modelValue:e(V),"onUpdate:modelValue":l[18]||(l[18]=f=>F(V)?V.value=f:V=f),modelModifiers:{trim:!0},placeholder:"1500",optional:"",invalidMessage:e(a)(e(C).ipv4Mtu),disabled:e(H).configure,ref_key:"ipv4MtuRef",ref:R},null,8,["label","modelValue","invalidMessage","disabled"]),Se(p(e(le),{label:e(a)("standalone.interfaces_and_devices.ipv6_mtu_bytes"),modelValue:e(h),"onUpdate:modelValue":l[19]||(l[19]=f=>F(h)?h.value=f:h=f),modelModifiers:{trim:!0},placeholder:"1500",optional:"",invalidMessage:e(a)(e(C).ipv6Mtu),disabled:e(H).configure,ref_key:"ipv6MtuRef",ref:T},null,8,["label","modelValue","invalidMessage","disabled"]),[[Ie,e(E)]]),Se(p(e(le),{label:e(a)("standalone.interfaces_and_devices.client_id_label"),helperText:e(a)("standalone.interfaces_and_devices.enter_a_hexadecimal_string"),modelValue:e(X),"onUpdate:modelValue":l[20]||(l[20]=f=>F(X)?X.value=f:X=f),modelModifiers:{trim:!0},optional:"",invalidMessage:e(a)(e(C).dhcpClientId),disabled:e(H).configure,ref_key:"dhcpClientIdRef",ref:P},null,8,["label","helperText","modelValue","invalidMessage","disabled"]),[[Ie,["dhcp","dhcpv6"].includes(e(m))]]),Se(p(e(le),{label:e(a)("standalone.interfaces_and_devices.vendor_class_label"),modelValue:e(ve),"onUpdate:modelValue":l[21]||(l[21]=f=>F(ve)?ve.value=f:ve=f),modelModifiers:{trim:!0},optional:"",invalidMessage:e(a)(e(C).dhcpVendorClass),disabled:e(H).configure,ref_key:"dhcpVendorClassRef",ref:_a},null,8,["label","modelValue","invalidMessage","disabled"]),[[Ie,e(m)==="dhcp"]])],512),[[Ie,e(I)]])]),_:1})],64)):y("",!0),e(C).notificationTitle?(t(),B(e(xe),{key:5,kind:"error",title:e(C).notificationTitle,description:e(C).notificationDescription},Le({_:2},[e(C).notificationDetails?{name:"details",fn:w(()=>[N(v(e(C).notificationDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):y("",!0)]),l[22]||(l[22]=u("hr",{class:"my-8 border-gray-200 dark:border-gray-700"},null,-1)),u("div",Li,[p(e(J),{kind:"tertiary",size:"lg",onClick:Ue(Fe,["prevent"]),disabled:e(H).configure,class:"mr-3"},{default:w(()=>[N(v(e(a)("common.cancel")),1)]),_:1},8,["disabled"]),p(e(J),{kind:"primary",size:"lg",onClick:Ue(ia,["prevent"]),disabled:e(H).configure,loading:e(H).configure},{default:w(()=>[N(v(ha.value),1)]),_:1},8,["disabled","loading"])])])]),_:1},8,["isShown","title","closeAriaLabel"])}}}),Bi={key:0},Ri=Me({__name:"UnconfigureDeviceModal",props:{visible:{type:Boolean,default:!1},device:{type:Object,required:!0}},emits:["close","reloadData"],setup(k,{emit:D}){const r=k,z=D,{t:a}=Ve(),K=Re();let x=o({unconfigureDevice:!1}),s=o({notificationTitle:"",notificationDescription:"",notificationDetails:""});const g=ae(()=>te(r.device));function M(){z("close")}async function m(){s.value.notificationTitle="",s.value.notificationDescription="",s.value.notificationDetails="",x.value.unconfigureDevice=!0;try{await fe("ns.devices","unconfigure-device",{iface_name:g.value[".name"]}),z("reloadData"),z("close")}catch(S){console.error(S),s.value.notificationTitle=a("standalone.interfaces_and_devices.cannot_remove_device_configuration"),s.value.notificationDescription=a(se(S)),s.value.notificationDetails=S.toString()}finally{x.value.unconfigureDevice=!1,await K.getChanges()}}return(S,ee)=>(t(),B(e(pa),{visible:k.visible,title:e(we)(k.device)?e(a)("standalone.interfaces_and_devices.delete_interface"):e(a)("standalone.interfaces_and_devices.remove_configuration"),kind:"warning",primaryLabel:e(we)(k.device)?e(a)("standalone.interfaces_and_devices.delete_interface"):e(a)("standalone.interfaces_and_devices.remove_configuration"),cancelLabel:e(a)("common.cancel"),primaryButtonKind:"danger",primaryButtonDisabled:e(x).unconfigureDevice,primaryButtonLoading:e(x).unconfigureDevice,closeAriaLabel:e(a)("common.close"),onClose:M,onPrimaryClick:m},{default:w(()=>[k.device&&g.value?(t(),_("div",Bi,[e(we)(k.device)?(t(),_(Z,{key:0},[N(v(e(a)("standalone.interfaces_and_devices.delete_bridge_explanation",{iface:g.value[".name"],device:k.device.name})),1)],64)):e(ge)(k.device)?(t(),_(Z,{key:1},[N(v(e(a)("standalone.interfaces_and_devices.delete_bond_explanation",{iface:g.value[".name"]})),1)],64)):(t(),_(Z,{key:2},[N(v(e(a)("standalone.interfaces_and_devices.remove_configuration_explanation",{iface:g.value[".name"],device:k.device.name})),1)],64))])):y("",!0),e(s).notificationTitle?(t(),B(e(xe),{key:1,kind:"error",title:e(s).notificationTitle,description:e(s).notificationDescription,class:"mt-4"},Le({_:2},[e(s).notificationDetails?{name:"details",fn:w(()=>[N(v(e(s).notificationDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):y("",!0)]),_:1},8,["visible","title","primaryLabel","cancelLabel","primaryButtonDisabled","primaryButtonLoading","closeAriaLabel"]))}}),Ni={class:"space-y-6"},Ei={class:"flex justify-end"},Ui=Me({__name:"CreateVlanDeviceDrawer",props:{networkConfig:{type:Object,required:!0},allDevices:{type:Array,required:!0},isShown:{type:Boolean,default:!1}},emits:["close","reloadData"],setup(k,{emit:D}){const r=k,z=D,{t:a}=Ve(),K=Re();let x=o("8021q"),s=o(),g=o(""),M=o(),m=o(""),S=o(),ee=o([]);const q=o(!1);let O=[{id:"8021q",label:a("standalone.interfaces_and_devices.vlan_8021q")},{id:"8021ad",label:a("standalone.interfaces_and_devices.vlan_8021ad")}],E=o({create:!1}),I=o({notificationTitle:"",notificationDescription:"",notificationDetails:"",vlanId:"",baseDevice:""});const Q=ae(()=>`${m.value}.${g.value}`),oe=ae(()=>ee.value.filter(T=>!["lo","ifb-dns"].includes(Y(T))&&!Ee(T)).map(T=>{const U=r.networkConfig.interface.filter(ie=>ie.device===T.name).map(ie=>ie[".name"]);let A="";return ge(T)?A=`(${a("standalone.interfaces_and_devices.bond")})`:U&&(A=U.join(", ")),{id:Y(T),label:Y(T),description:A}}));Ce(()=>r.isShown,()=>{r.isShown&&(ce(),q.value=!1,ee.value=Qa(r.allDevices),x.value="8021q",g.value="",m.value="",j(s))});function W(){z("close")}function ce(){for(const[h,T]of Object.entries(I.value))typeof T=="string"?I.value[h]="":Array.isArray(T)&&(I.value[h]=[])}async function V(){if(I.value.notificationTitle="",I.value.notificationDescription="",I.value.notificationDetails="",!!R()){E.value.create=!0;try{await fe("ns.devices","create-vlan-device",{vlan_type:x.value,base_device_name:m.value,vlan_id:g.value}),z("reloadData"),W()}catch(T){console.error(T),I.value.notificationTitle=a("error.cannot_create_device"),I.value.notificationDescription=a(se(T)),I.value.notificationDetails=T.toString()}finally{E.value.create=!1,await K.getChanges()}}}function R(){ce();let h=!0;{let{valid:T,errMessage:U}=be(g.value);if(!T)I.value.vlanId=a(U),h&&(h=!1,j(M));else{{let{valid:A,errMessage:ie,i18Params:X}=oi(g.value);A||(I.value.vlanId=a(ie,X),h&&(h=!1,j(M)))}Q.value in r.allDevices&&(I.value.vlanId=a("standalone.interfaces_and_devices.device_name_already_used",{name:Q.value}),h&&(h=!1,j(M)))}}{let{valid:T,errMessage:U}=be(m.value);T||(I.value.baseDevice=a(U),h&&(h=!1,j(S)))}return h}return(h,T)=>{const U=Sa("font-awesome-icon");return t(),B(e(Aa),{isShown:k.isShown,title:e(a)("standalone.interfaces_and_devices.create_vlan_device"),closeAriaLabel:e(a)("common.shell.close_side_drawer"),onClose:W},{default:w(()=>[u("form",null,[u("div",Ni,[p(e(le),{label:e(a)("standalone.interfaces_and_devices.vlan_id"),helperText:e(a)("standalone.interfaces_and_devices.vlan_id_helper"),modelValue:e(g),"onUpdate:modelValue":T[0]||(T[0]=A=>F(g)?g.value=A:g=A),modelModifiers:{number:!0},type:"number",min:"1",max:"4094",invalidMessage:e(a)(e(I).vlanId),disabled:e(E).create,ref_key:"vlanIdRef",ref:M},null,8,["label","helperText","modelValue","invalidMessage","disabled"]),p(e(ca),{modelValue:e(m),"onUpdate:modelValue":T[1]||(T[1]=A=>F(m)?m.value=A:m=A),options:oe.value,label:e(a)("standalone.interfaces_and_devices.base_device"),invalidMessage:e(I).baseDevice,noResultsLabel:e(a)("ne_combobox.no_results"),limitedOptionsLabel:e(a)("ne_combobox.limited_options_label"),disabled:e(E).create,ref_key:"baseDeviceRef",ref:S,noOptionsLabel:e(a)("ne_combobox.no_options_label"),"selected-label":e(a)("ne_combobox.selected"),"user-input-label":e(a)("ne_combobox.user_input_label"),optionalLabel:e(a)("common.optional")},null,8,["modelValue","options","label","invalidMessage","noResultsLabel","limitedOptionsLabel","disabled","noOptionsLabel","selected-label","user-input-label","optionalLabel"]),p(e(J),{kind:"tertiary",onClick:T[2]||(T[2]=A=>q.value=!q.value)},{suffix:w(()=>[p(U,{icon:["fas",q.value?"chevron-up":"chevron-down"],class:"h-4 w-4","aria-hidden":"true"},null,8,["icon"])]),default:w(()=>[N(v(e(a)("common.advanced_settings"))+" ",1)]),_:1}),q.value?(t(),B(e(He),{key:0,modelValue:e(x),"onUpdate:modelValue":T[3]||(T[3]=A=>F(x)?x.value=A:x=A),label:e(a)("standalone.interfaces_and_devices.device_type"),options:e(O),ref_key:"vlanTypeRef",ref:s},null,8,["modelValue","label","options"])):y("",!0),e(I).notificationTitle?(t(),B(e(xe),{key:1,kind:"error",title:e(I).notificationTitle,description:e(I).notificationDescription},Le({_:2},[e(I).notificationDetails?{name:"details",fn:w(()=>[N(v(e(I).notificationDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):y("",!0)]),T[4]||(T[4]=u("hr",{class:"my-8 border-gray-200 dark:border-gray-700"},null,-1)),u("div",Ei,[p(e(J),{kind:"tertiary",size:"lg",onClick:Ue(W,["prevent"]),disabled:e(E).create,class:"mr-3"},{default:w(()=>[N(v(e(a)("common.cancel")),1)]),_:1},8,["disabled"]),p(e(J),{kind:"primary",size:"lg",onClick:Ue(V,["prevent"]),disabled:e(E).create,loading:e(E).create},{default:w(()=>[N(v(e(a)("standalone.interfaces_and_devices.create_device")),1)]),_:1},8,["disabled","loading"])])])]),_:1},8,["isShown","title","closeAriaLabel"])}}}),Pi=Me({__name:"DeleteDeviceModal",props:{visible:{type:Boolean,default:!1},device:{type:Object,required:!0}},emits:["close","reloadData"],setup(k,{emit:D}){const r=k,z=D,{t:a}=Ve(),K=Re();let x=o({deleteDevice:!1}),s=o({notificationTitle:"",notificationDescription:"",notificationDetails:""});Ce(()=>r.visible,()=>{r.visible&&(s.value.notificationTitle="",s.value.notificationDescription="")});function g(){z("close")}async function M(){s.value.notificationTitle="",s.value.notificationDescription="",s.value.notificationDetails="",x.value.deleteDevice=!0;try{await fe("ns.devices","delete-device",{device_name:r.device.name}),z("reloadData"),z("close")}catch(m){console.error(m),s.value.notificationTitle=a("standalone.interfaces_and_devices.cannot_delete_device"),s.value.notificationDescription=a(se(m)),s.value.notificationDetails=m.toString()}finally{x.value.deleteDevice=!1,await K.getChanges()}}return(m,S)=>(t(),B(e(pa),{visible:k.visible,title:e(a)("standalone.interfaces_and_devices.delete_device"),kind:"warning",primaryLabel:e(a)("standalone.interfaces_and_devices.delete_device"),cancelLabel:e(a)("common.cancel"),primaryButtonKind:"danger",primaryButtonDisabled:e(x).deleteDevice,primaryButtonLoading:e(x).deleteDevice,closeAriaLabel:e(a)("common.close"),onClose:g,onPrimaryClick:M},{default:w(()=>[u("div",null,v(e(a)("standalone.interfaces_and_devices.delete_device_name",{name:k.device.name})),1),e(s).notificationTitle?(t(),B(e(xe),{key:0,kind:"error",title:e(s).notificationTitle,description:e(s).notificationDescription,class:"mt-4"},Le({_:2},[e(s).notificationDetails?{name:"details",fn:w(()=>[N(v(e(s).notificationDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):y("",!0)]),_:1},8,["visible","title","primaryLabel","cancelLabel","primaryButtonDisabled","primaryButtonLoading","closeAriaLabel"]))}}),zi={class:"space-y-4"},ji=Me({__name:"DeleteBondModal",props:{visible:{type:Boolean,default:!1},bond:{type:String,default:""}},emits:["close","success"],setup(k,{emit:D}){const{t:r}=Ve(),z=Re(),a=k,K=D,x=o(!1),s=o(),g=o();Ce(()=>a.bond,S=>{S&&(g.value=S)});function M(){x.value=!0,s.value=void 0,fe("ns.devices","delete-bond",{name:g.value}).then(()=>{z.getChanges(),K("success")}).catch(S=>{s.value=S}).finally(()=>{x.value=!1})}function m(){x.value||(s.value=void 0,K("close"))}return(S,ee)=>(t(),B(e(pa),{"cancel-label":e(r)("common.cancel"),"close-aria-label":e(r)("common.close"),"primary-button-disabled":x.value,"primary-button-kind":"danger","primary-button-loading":x.value,"primary-label":e(r)("common.delete"),"secondary-button-disabled":x.value,"secondary-button-loading":x.value,title:e(r)("standalone.interfaces_and_devices.delete_bond_title",{name:g.value}),visible:k.visible,kind:"warning",onClose:m,onPrimaryClick:M},{default:w(()=>[u("div",zi,[s.value?(t(),B(e(xe),{key:0,description:e(r)(e(se)(s.value)),title:e(r)("standalone.interfaces_and_devices.cannot_delete_bond"),class:"mt-4",kind:"error"},null,8,["description","title"])):y("",!0),u("p",null,v(e(r)("standalone.interfaces_and_devices.delete_bond_description",{name:g.value})),1)])]),_:1},8,["cancel-label","close-aria-label","primary-button-disabled","primary-button-loading","primary-label","secondary-button-disabled","secondary-button-loading","title","visible"]))}}),Ka=Me({__name:"DeviceButtons",props:{deviceOrIface:{type:Object,required:!0},networkConfig:{type:Object,required:!0},firewallConfig:{type:Object,required:!0}},emits:["showConfigureDeviceDrawer","configureBond","showCreateAliasInterfaceDrawer","showUnconfigureDeviceModal","showDeleteBondModal","showDeleteDeviceModal"],setup(k,{emit:D}){const{t:r}=Ve(),z=k,a=D;function K(s){const g=te(s);return[{id:"createAliasInterface",label:r("standalone.interfaces_and_devices.create_alias_interface"),icon:"copy",iconStyle:"fas",action:()=>a("showCreateAliasInterfaceDrawer",s),disabled:!g||!!Ge(s,z.networkConfig)||!fa(g,z.firewallConfig)},{id:"removeConfiguration",label:we(s)?r("standalone.interfaces_and_devices.delete_interface"):r("standalone.interfaces_and_devices.remove_configuration"),icon:"circle-minus",iconStyle:"fas",action:()=>a("showUnconfigureDeviceModal",s),danger:!0,disabled:!g}]}function x(s){return[{id:"deleteDevice",label:r("standalone.interfaces_and_devices.delete_device"),icon:"trash",iconStyle:"fas",action:()=>a("showDeleteDeviceModal",s),danger:!0}]}return(s,g)=>{const M=Sa("font-awesome-icon");return t(),_(Z,null,[e(te)(k.deviceOrIface)&&!e(ge)(k.deviceOrIface)?(t(),B(e(J),{key:0,kind:"tertiary",size:"lg",onClick:g[0]||(g[0]=m=>a("showConfigureDeviceDrawer",k.deviceOrIface))},{prefix:w(()=>[p(M,{icon:["fas","pen-to-square"],class:"h-4 w-4","aria-hidden":"true"})]),default:w(()=>[N(" "+v(e(r)("common.edit")),1)]),_:1})):e(va)(k.deviceOrIface)?(t(),B(e(J),{key:1,kind:"secondary",size:"lg",onClick:g[1]||(g[1]=m=>a("configureBond",k.deviceOrIface))},{prefix:w(()=>[p(M,{icon:["fas","wrench"],class:"h-4 w-4","aria-hidden":"true"})]),default:w(()=>[N(" "+v(e(r)("standalone.interfaces_and_devices.configure_bond")),1)]),_:1})):e(ge)(k.deviceOrIface)?y("",!0):(t(),B(e(J),{key:2,kind:"secondary",size:"lg",onClick:g[2]||(g[2]=m=>a("showConfigureDeviceDrawer",k.deviceOrIface))},{prefix:w(()=>[p(M,{icon:["fas","wrench"],class:"h-4 w-4","aria-hidden":"true"})]),default:w(()=>[N(" "+v(e(r)("standalone.interfaces_and_devices.configure")),1)]),_:1})),e(te)(k.deviceOrIface)&&!e(ge)(k.deviceOrIface)||e(ui)(k.deviceOrIface)?(t(),B(e(Ze),{key:3,items:K(k.deviceOrIface),alignToRight:!0},null,8,["items"])):y("",!0),e(va)(k.deviceOrIface)?(t(),B(e(Ze),{key:4,items:[{id:"deleteBond",label:e(r)("standalone.interfaces_and_devices.delete_bond"),icon:"trash",iconStyle:"fas",action:()=>a("showDeleteBondModal",k.deviceOrIface),danger:!0}],alignToRight:!0},null,8,["items"])):e(Ee)(k.deviceOrIface)&&!e(te)(k.deviceOrIface)?(t(),B(e(Ze),{key:5,items:x(k.deviceOrIface),alignToRight:!0},null,8,["items"])):y("",!0)],64)}}}),Fi={class:"flex flex-col justify-between md:flex-row md:items-center"},qi={class:"mb-6 text-sm text-gray-500 dark:text-gray-400"},$i={class:"space-y-6 text-sm"},Hi={class:"flex justify-end gap-4"},Gi={key:0,class:"flex animate-pulse"},Zi={class:"flex-1 space-y-8"},Ki={class:"space-y-4"},Wi={key:0,class:"absolute right-4 top-4 flex items-center gap-2 3xl:hidden"},Xi={class:"grid grid-cols-1 gap-x-8 gap-y-8 pr-16 md:grid-cols-2 2xl:grid-cols-4 3xl:grid-cols-5 3xl:pr-0"},Yi={class:"flex flex-wrap items-start gap-x-1 gap-y-6 border-gray-200 pr-6 dark:border-gray-600 md:justify-between md:border-r"},Qi={class:"flex items-center"},Ji={class:"font-semibold"},en={key:0},an={key:0,class:"font-semibold"},nn={key:1},tn={key:2},ln={class:"flex flex-col items-center gap-2"},sn={key:0},on={key:1},rn={key:2},dn={class:"space-y-2"},cn={key:0},un={key:1},fn={class:"font-medium"},vn={key:0},pn={key:1},_n={class:"font-medium"},mn={key:0},bn={key:1},gn={class:"font-medium"},yn={key:2,class:"!-mt-2"},wn={class:"font-medium"},kn={key:1},hn={class:"font-medium"},Dn={class:"font-medium"},Cn={key:0},xn={key:0},Mn={key:0},Vn={key:1},Tn={key:0},An={key:0},Sn={key:0,class:"mb-2 flex items-center gap-2"},In={key:1},Ln={class:"font-medium"},On={key:0,class:"hidden items-start justify-end gap-2 border-l border-gray-200 dark:border-gray-600 3xl:flex"},Bn={key:0},Rn={class:"absolute right-4 top-4 flex items-center gap-2 3xl:hidden"},Nn={class:"flex flex-wrap justify-between gap-8"},En={class:"w-full border-gray-200 pr-8 dark:border-gray-600 md:w-1/2 md:border-r xl:w-1/4 3xl:w-1/5"},Un={class:"font-semibold"},Pn={class:"flex grow flex-wrap gap-8 pr-40"},zn={class:"font-medium"},jn={class:"font-medium"},Fn={class:"hidden w-1/5 items-start justify-end gap-2 border-l border-gray-200 pl-8 dark:border-gray-600 3xl:flex"},qn={key:0,class:"group flex items-start"},$n={class:"flex flex-wrap justify-between gap-8"},Hn={class:"w-full border-gray-200 pr-8 dark:border-gray-600 md:w-1/2 md:border-r xl:w-1/4 3xl:w-1/5"},Gn={class:"font-semibold"},Zn={class:"flex grow flex-wrap gap-8"},Kn={class:"font-medium"},Wn={class:"font-medium"},Xn={key:0,class:"group flex items-start"},Yn={class:"flex flex-wrap justify-between gap-8"},Qn={class:"w-full border-gray-200 pr-8 dark:border-gray-600 md:w-1/2 md:border-r xl:w-1/4 3xl:w-1/5"},Jn={class:"font-semibold"},et={class:"flex grow flex-wrap gap-8 font-medium"},at=1e4,ct=Me({__name:"InterfacesAndDevicesView",setup(k){const{t:D,te:r}=Ve();let z=o(0),a=o([]),K=o([]),x=o({}),s=o({}),g=o({}),M=o({}),m=o(!1),S=o({}),ee=o({}),q=o({}),O=o(!1),E=o({}),I=o({}),Q=o(null),oe=o(!1),W=o(null),ce=o({}),V=o(!1),R=o(!1),h=o(!1),T=o("physical"),U=o(!1);const A=o({openvpn:{},openvpnRw:{},ipsec:{}}),ie=o({});let X=o({networkDevices:!0,networkConfig:!0,firewallConfig:!0}),P=o({notificationTitle:"",notificationDescription:"",notificationDetails:"",getVpnNetworks:"",getVpnNetworksDetails:""});const ve=o();function _a(){ve.value=void 0,U.value=!1,ne()}const ke=ae(()=>X.value.networkDevices||X.value.networkConfig||X.value.firewallConfig),ma=ae(()=>{const i=[];return K.value.forEach(c=>{const b=[];c.devices.forEach(me=>{const ue=a.value.find(Oe=>Y(Oe)===me);ue&&b.push(ue)});const n={name:c.name,devices:b};i.push(n)}),i.sort(Za)});ri(()=>{ne()}),di(()=>{z.value&&clearInterval(z.value)});async function ne(){Pe(),$(),ba(),z.value&&(clearInterval(z.value),z.value=0),z.value=setInterval(Pe,at)}async function ba(){X.value.firewallConfig=!0;try{const i=await Ua("firewall");i.zone.sort(Za),x.value=i}catch(i){console.error(i),P.value.notificationTitle=D("error.cannot_load_firewall_config"),P.value.notificationDescription=D(se(i))}X.value.firewallConfig=!1}async function $(){X.value.networkConfig=!0;try{s.value=await Ua("network")}catch(i){console.error(i),P.value.notificationTitle=D("error.cannot_load_network_config"),P.value.notificationDescription=D(se(i))}X.value.networkConfig=!1}async function Pe(){P.value.notificationTitle="",P.value.notificationDescription="",P.value.notificationDetails="",z.value||(X.value.networkDevices=!0);try{const i=await fe("ns.devices","list-devices"),c=i.data.all_devices.filter(b=>{var n;return(n=b.name)==null?void 0:n.startsWith("bond-")}).map(b=>{var n;return(n=b.name)==null?void 0:n.slice(5)});if(a.value=i.data.all_devices.filter(b=>!c.includes(b.name??b[".name"])),K.value=i.data.devices_by_zone,X.value.networkDevices)for(const b of a.value)sa(b)?re(b):oa(b)?pe(b):$e(b)&&Ke()}catch(i){console.error(i),P.value.notificationTitle=D("error.cannot_load_network_devices"),P.value.notificationDescription=D(se(i)),P.value.notificationDetails=i.toString()}X.value.networkDevices=!1}async function re(i){P.value.getVpnNetworks="",P.value.getVpnNetworksDetails="";try{const b=(await fe("ns.ovpnrw","get-configuration",{instance:i.openvpn_rw[".name"]})).data.server;A.value.openvpnRw[Y(i)]=b}catch(c){console.error(c),P.value.getVpnNetworks=D(se(c)),P.value.getVpnNetworksDetails=c.toString()}}async function Ke(){P.value.getVpnNetworks="",P.value.getVpnNetworksDetails="";try{const c=(await fe("ns.ipsectunnel","list-tunnels")).data.tunnels;for(const b of c){const n=`ipsec/${b.id}`;A.value.ipsec[n]=b.remote,ie.value[n]=b.name}}catch(i){console.error(i),P.value.getVpnNetworks=D(se(i)),P.value.getVpnNetworksDetails=i.toString()}}async function pe(i){P.value.getVpnNetworks="",P.value.getVpnNetworksDetails="";try{const b=(await fe("ns.ovpntunnel","list-tunnels")).data,n=i.openvpn.ns_name;if(i.openvpn.server){const me=b.servers.find(ue=>ue.ns_name===n);me&&(A.value.openvpn[n]=me.remote_network)}else{const me=b.clients.find(ue=>ue.ns_name===n);me&&(A.value.openvpn[n]=me.remote_network)}}catch(c){console.error(c),P.value.getVpnNetworks=D(se(c)),P.value.getVpnNetworksDetails=c.toString()}}function ga(i){S.value[Y(i)]=!S.value[Y(i)]}function _e(i){ee.value[i.name]=!ee.value[i.name]}function ze(i){q.value[Y(i)]=!q.value[Y(i)]}function Te(i){const c=da(i,K.value);return c?vi(c):"border-gray-500 dark:border-gray-500"}function We(i){const c=da(i,K.value);return c?Ya(c):"circle-question"}function ya(i){const c=da(i,K.value);return pi(c)}function wa(i){const c=da(i,K.value);return _i(c)}function Xe(i){g.value=i,h.value=!0}function Ye(i){ve.value=i[".name"]??i.bond_interface,U.value=!0}function H(i,c){const b=te(c);E.value=i,I.value=b,O.value=!0}function C(i,c){const b=te(c);return[{id:"deleteAlias",label:D("standalone.interfaces_and_devices.delete_alias"),icon:"trash",iconStyle:"fas",action:()=>H(i,c),danger:!0,disabled:!fa(b,x.value)}]}function Qe(i){const c=te(i);M.value=c,Q.value=null,ce.value=s.value.device.find(b=>b.name===i.name),m.value=!0}function Je(i,c){const b=te(c);M.value=b,Q.value=i,ce.value=s.value.device.find(n=>n.name===c.name),m.value=!0}function Ae(){m.value=!1}function je(i){g.value=gi(i),i[".name"]==null?g.value[".name"]=i.bond_interface:g.value.name="bond-"+i[".name"],T.value="physical",W.value=null,oe.value=!0}function Ne(i){g.value=i;const c=te(i);c?W.value=c:W.value=null,we(i)||ge(i)?T.value="logical":T.value="physical",oe.value=!0}function ka(){oe.value=!1}function ha(){g.value={},W.value=null,T.value="logical",oe.value=!0}function ea(i){g.value=i,V.value=!0}function Fe(i,c){var ue,Oe;const b=Ge(i,c),n=((ue=b==null?void 0:b.ipaddr)==null?void 0:ue.length)||0,me=((Oe=b==null?void 0:b.ip6addr)==null?void 0:Oe.length)||0;return n+me}function aa(){R.value=!0}function Da(){R.value=!1}function ia(i,c){return Ee(i)&&(i=xa(i,c)),i!=null&&i.mac?Ta(i.mac):null}function na(i){const c=te(i);return c!=null&&c.gateway?c.gateway:null}function ta(i){const c=te(i);return c!=null&&c.ip6gw?c.ip6gw:null}function d(i,c){var b;return Ee(i)&&(i=xa(i,c)),(b=i==null?void 0:i.stats)!=null&&b.rx_bytes?za(i.stats.rx_bytes):null}function l(i,c){var b;return Ee(i)&&(i=xa(i,c)),(b=i==null?void 0:i.stats)!=null&&b.tx_bytes?za(i.stats.tx_bytes):null}function L(i){return!(oa(i)||sa(i)||$e(i)||qa(i))}function f(i){return i>=1e6?(i/1e6).toLocaleString(void 0,{maximumFractionDigits:2})+"M":i.toLocaleString()}return(i,c)=>(t(),_("div",null,[u("div",Fi,[p(e(Pa),{tag:"h3",class:"mb-7"},{default:w(()=>[N(v(e(D)("standalone.interfaces_and_devices.title")),1)]),_:1}),u("div",qi,v(e(D)("common.data_updated_every_seconds",{seconds:10})),1)]),e(P).notificationTitle?(t(),B(e(xe),{key:0,kind:"error",title:e(P).notificationTitle,description:e(P).notificationDescription,class:"mb-4"},Le({_:2},[e(P).notificationDetails?{name:"details",fn:w(()=>[N(v(e(P).notificationDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):y("",!0),e(P).getVpnNetworks?(t(),B(e(xe),{key:1,kind:"error",title:e(D)("error.cannot_retrieve_vpn_networks"),description:e(P).getVpnNetworks,class:"mb-4"},Le({_:2},[e(P).getVpnNetworksDetails?{name:"details",fn:w(()=>[N(v(e(P).getVpnNetworksDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):y("",!0),u("div",$i,[u("div",Hi,[p(e(J),{kind:"tertiary",size:"lg",onClick:aa},{prefix:w(()=>[p(e(De),{icon:["fas","plus"],class:"h-4 w-4","aria-hidden":"true"})]),default:w(()=>[N(" "+v(e(D)("standalone.interfaces_and_devices.create_vlan_device")),1)]),_:1}),p(e(J),{size:"lg",onClick:ha},{prefix:w(()=>[p(e(De),{icon:["fas","plus"],class:"h-4 w-4","aria-hidden":"true"})]),default:w(()=>[N(" "+v(e(D)("standalone.interfaces_and_devices.create_logical_interface")),1)]),_:1})]),ke.value?(t(),_("div",Gi,[u("div",Zi,[(t(),_(Z,null,de(4,b=>u("div",{key:b,class:Be("h-24 rounded-md bg-gray-300 dark:bg-gray-700")})),64))])])):e(P).notificationTitle?y("",!0):(t(!0),_(Z,{key:1},de(ma.value,b=>(t(),_(Z,null,[e(Va)(b.devices)?y("",!0):(t(),_("div",{key:b.name},[p(e(Pa),{tag:"h6",class:"mb-1.5"},{default:w(()=>[N(v(e(r)(`standalone.interfaces_and_devices.zone_label_${b.name}`)?e(D)(`standalone.interfaces_and_devices.zone_label_${b.name}`):e(Ta)(b.name)),1)]),_:2},1024),u("div",Ki,[(t(!0),_(Z,null,de(b.devices,(n,me)=>{var ue,Oe,Ia,La,Oa,Ba;return t(),_("div",{key:me},[u("div",{class:Be([`relative rounded-md border-l-4 bg-white px-8 py-6 shadow dark:bg-gray-800 ${Te(n)}`])},[L(n)?(t(),_("div",Wi,[p(Ka,{deviceOrIface:n,networkConfig:e(s),firewallConfig:e(x),onShowConfigureDeviceDrawer:Ne,onConfigureBond:je,onShowCreateAliasInterfaceDrawer:Qe,onShowUnconfigureDeviceModal:ea,onShowDeleteBondModal:Ye,onShowDeleteDeviceModal:Xe},null,8,["deviceOrIface","networkConfig","firewallConfig"])])):y("",!0),u("div",Xi,[u("div",Yi,[u("div",Qi,[u("div",{class:Be(`mr-4 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full ${ya(n)}`)},[p(e(De),{icon:["fas",We(n)],"aria-hidden":"true",class:Be(`h-5 w-5 ${wa(n)}`)},null,8,["icon","class"])],2),u("div",null,[e($e)(n)?(t(),_(Z,{key:0},[u("div",Ji,v(ie.value[n.ns_link]),1),e(ra)(n)?(t(),_("div",en,v(e(ra)(n)),1)):y("",!0)],64)):(t(),_(Z,{key:1},[e(ra)(n)?(t(),_("div",an,v(e(ra)(n)),1)):y("",!0),(ue=n.name)!=null&&ue.startsWith("bond-")?(t(),_("div",nn,v(n.name.slice(5)),1)):(t(),_("div",tn,v(n.name),1))],64))])]),u("div",ln,[e(Ge)(n,e(s))?(t(),_("div",sn,[p(e(J),{kind:"tertiary",size:"sm",onClick:G=>ga(n),class:"-mr-2 -mt-2"},{suffix:w(()=>[p(e(De),{icon:["fas",e(S)[e(Y)(n)||""]?"chevron-up":"chevron-down"],class:"h-3 w-3","aria-hidden":"true"},null,8,["icon"])]),default:w(()=>[N(" "+v(e(D)("standalone.interfaces_and_devices.num_alias",{num:Fe(n,e(s))})),1)]),_:2},1032,["onClick"])])):y("",!0),e(we)(n)?(t(),_("div",on,[p(e(J),{kind:"tertiary",size:"sm",onClick:G=>_e(n),class:"-mr-2 -mt-2"},{suffix:w(()=>[p(e(De),{icon:["fas",e(ee)[n.name||""]?"chevron-up":"chevron-down"],class:"h-3 w-3","aria-hidden":"true"},null,8,["icon"])]),default:w(()=>[N(" "+v(e(D)("standalone.interfaces_and_devices.bridge")),1)]),_:2},1032,["onClick"])])):y("",!0),e(ge)(n)?(t(),_("div",rn,[p(e(J),{kind:"tertiary",size:"sm",onClick:G=>ze(n),class:"-mr-2 -mt-2"},{suffix:w(()=>[p(e(De),{icon:["fas",e(q)[e(Y)(n)||""]?"chevron-up":"chevron-down"],class:"h-3 w-3","aria-hidden":"true"},null,8,["icon"])]),default:w(()=>[N(" "+v(e(D)("standalone.interfaces_and_devices.bond")),1)]),_:2},1032,["onClick"])])):y("",!0)]),e(Ee)(n)?(t(),B(e(la),{key:0,size:"sm",kind:"primary",text:"VLAN"})):y("",!0),e(oa)(n)?(t(),B(e(la),{key:1,size:"sm",kind:"primary",text:e(D)("standalone.openvpn_tunnel.short_name")},null,8,["text"])):y("",!0),e(sa)(n)?(t(),B(e(la),{key:2,size:"sm",kind:"primary",text:e(D)("standalone.openvpn_rw.short_name")},null,8,["text"])):y("",!0),e($e)(n)?(t(),B(e(la),{key:3,size:"sm",kind:"primary",text:"IPSEC"})):y("",!0)]),u("div",dn,[ia(n,e(a))?(t(),_("div",cn,[c[5]||(c[5]=u("span",{class:"font-medium"},"MAC: ",-1)),u("span",null,v(ia(n,e(a))),1)])):y("",!0),e(qa)(n)?(t(),_("div",un,[u("span",fn,v(e(D)("standalone.interfaces_and_devices.hotspot_network"))+": ",1),u("span",null,v((Oe=n.hotspot)==null?void 0:Oe.network),1)])):y("",!0),u("div",null,[(Ia=e($a)(n,e(s)))!=null&&Ia.length?(t(),_("div",vn,[(t(!0),_(Z,null,de(e($a)(n,e(s)),(G,ye)=>(t(),_("div",{key:ye},[u("div",null,[c[6]||(c[6]=u("span",{class:"font-medium"},"IPv4: ",-1)),u("span",null,v(G),1)])]))),128))])):y("",!0),na(n)?(t(),_("div",pn,[u("span",_n,v(e(D)("standalone.interfaces_and_devices.ipv4_gateway"))+": ",1),u("span",null,v(na(n)),1)])):y("",!0)]),u("div",null,[(La=e(Ha)(n,e(s)))!=null&&La.length?(t(),_("div",mn,[(t(!0),_(Z,null,de(e(Ha)(n,e(s)),(G,ye)=>(t(),_("div",{key:ye},[u("div",null,[c[7]||(c[7]=u("span",{class:"font-medium"},"IPv6: ",-1)),u("span",null,v(G),1)])]))),128))])):y("",!0),ta(n)?(t(),_("div",bn,[u("span",gn,v(e(D)("standalone.interfaces_and_devices.ipv6_gateway"))+": ",1),u("span",null,v(ta(n)),1)])):y("",!0)]),e(Ga)(n)?(t(),_("div",yn,[e(sa)(n)?(t(),_(Z,{key:0},[u("div",wn,v(e(D)("standalone.interfaces_and_devices.clients_network"))+": ",1),A.value.openvpnRw[e(Y)(n)]?(t(),_("div",kn,v(A.value.openvpnRw[e(Y)(n)]),1)):(t(),B(e(Ma),{key:0,size:"sm",class:"mt-1"}))],64)):y("",!0),e($e)(n)?(t(),_(Z,{key:1},[u("div",hn,v(e(D)("standalone.ipsec_tunnel.remote_networks"))+": ",1),A.value.ipsec[n.ns_link]?(t(!0),_(Z,{key:1},de(A.value.ipsec[n.ns_link],G=>(t(),_("div",{key:G},v(G),1))),128)):(t(),B(e(Ma),{key:0,size:"sm",class:"mt-1"}))],64)):y("",!0),e(oa)(n)?(t(),_(Z,{key:2},[u("div",Dn,v(e(D)("standalone.openvpn_tunnel.remote_networks"))+": ",1),e(Va)(A.value.openvpn[n.openvpn.ns_name])?(t(),_("div",Cn,"-")):(t(!0),_(Z,{key:1},de(A.value.openvpn[n.openvpn.ns_name],G=>(t(),_("div",{key:G},v(G),1))),128))],64)):y("",!0)])):y("",!0)]),u("div",null,[d(n,e(a))?(t(),_("div",xn,[c[8]||(c[8]=u("span",{class:"font-medium"},"RX: ",-1)),u("span",null,v(d(n,e(a))||"-"),1),(Oa=n.stats)!=null&&Oa.rx_packets?(t(),_("span",Mn," ("+v(f(n.stats.rx_packets))+" pkts)",1)):y("",!0)])):y("",!0),l(n,e(a))?(t(),_("div",Vn,[c[9]||(c[9]=u("span",{class:"font-medium"},"TX: ",-1)),u("span",null,v(l(n,e(a))||"-"),1),(Ba=n.stats)!=null&&Ba.tx_packets?(t(),_("span",Tn," ("+v(f(n.stats.tx_packets))+" pkts)",1)):y("",!0)])):y("",!0)]),u("div",null,[e(Ga)(n)?y("",!0):(t(),_("div",An,[e(fi)(n,e(a))?(t(),_("div",Sn,[p(e(De),{icon:["fas","circle-check"],class:"h-4 w-4","aria-hidden":"true"}),u("span",null,v(e(D)("standalone.interfaces_and_devices.up")),1)])):y("",!0),n.speed&&n.speed!==-1?(t(),_("div",In,[u("span",Ln,v(e(D)("standalone.interfaces_and_devices.speed"))+": ",1),u("span",null,v(`${n.speed} Mbps`),1)])):y("",!0)]))]),L(n)?(t(),_("div",On,[p(Ka,{deviceOrIface:n,networkConfig:e(s),firewallConfig:e(x),onShowConfigureDeviceDrawer:Ne,onConfigureBond:je,onShowCreateAliasInterfaceDrawer:Qe,onShowUnconfigureDeviceModal:ea,onShowDeleteBondModal:Ye,onShowDeleteDeviceModal:Xe},null,8,["deviceOrIface","networkConfig","firewallConfig"])])):y("",!0)])],2),p(ua,{name:"slide-down"},{default:w(()=>[e(Ge)(n,e(s))&&e(S)[e(Y)(n)||""]?(t(),_("div",Bn,[(t(!0),_(Z,null,de([e(Ge)(n,e(s))],(G,ye)=>(t(),_("div",{key:ye,class:"group flex items-start"},[c[10]||(c[10]=u("div",{class:"ml-4 h-14 w-4 shrink-0 border-b border-l border-dashed border-gray-400 dark:border-gray-500"},null,-1)),u("div",{class:Be(`relative mt-4 grow rounded-md border-l-4 bg-white px-8 py-6 shadow dark:bg-gray-800 ${Te(n)}`)},[u("div",Rn,[p(e(J),{kind:"tertiary",size:"lg",onClick:he=>Je(G,n),disabled:!e(fa)(e(te)(n),e(x))},{prefix:w(()=>[p(e(De),{icon:["fas","pen-to-square"],class:"h-4 w-4","aria-hidden":"true"})]),default:w(()=>[N(" "+v(e(D)("common.edit")),1)]),_:2},1032,["onClick","disabled"]),p(e(Ze),{items:C(G,n),alignToRight:!0},null,8,["items"])]),u("div",Nn,[u("div",En,[u("div",Un,v(e(D)("standalone.interfaces_and_devices.alias"))+": "+v(G[".name"]),1)]),u("div",Pn,[(t(!0),_(Z,null,de(G.ipaddr,(he,qe)=>(t(),_("div",{key:qe},[u("span",zn,v(e(D)("standalone.interfaces_and_devices.ipv4"))+": ",1),u("span",null,v(he),1)]))),128)),(t(!0),_(Z,null,de(G.ip6addr,(he,qe)=>(t(),_("div",{key:qe},[u("span",jn,v(e(D)("standalone.interfaces_and_devices.ipv6"))+": ",1),u("span",null,v(he),1)]))),128))]),u("div",Fn,[p(e(J),{kind:"tertiary",size:"lg",onClick:he=>Je(G,n),disabled:!e(fa)(e(te)(n),e(x))},{prefix:w(()=>[p(e(De),{icon:["fas","pen-to-square"],class:"h-4 w-4","aria-hidden":"true"})]),default:w(()=>[N(" "+v(e(D)("common.edit")),1)]),_:2},1032,["onClick","disabled"]),p(e(Ze),{items:C(G,n),alignToRight:!0},null,8,["items"])])])],2)]))),128))])):y("",!0)]),_:2},1024),p(ua,{name:"slide-down"},{default:w(()=>{var G;return[e(we)(n)&&e(ee)[n.name||""]?(t(),_("div",qn,[c[11]||(c[11]=u("div",{class:"ml-4 h-14 w-4 shrink-0 border-b border-l border-dashed border-gray-400 dark:border-gray-500"},null,-1)),u("div",{class:Be(`relative mt-4 grow rounded-md border-l-4 bg-white px-8 py-6 shadow dark:bg-gray-800 ${Te(n)}`)},[u("div",$n,[u("div",Hn,[u("div",Gn,v(e(D)("standalone.interfaces_and_devices.bridge"))+": "+v(n.name),1)]),u("div",Zn,[u("span",Kn,v(e(D)("standalone.interfaces_and_devices.devices_pl",((G=n.ports)==null?void 0:G.length)||0))+": ",1),(t(!0),_(Z,null,de(n.ports,(ye,he)=>(t(),_("div",{key:he},[u("span",Wn,v(ye),1)]))),128))])])],2)])):y("",!0)]}),_:2},1024),p(ua,{name:"slide-down"},{default:w(()=>{var G,ye;return[(e(ge)(n)||(G=n.name)!=null&&G.startsWith("-bond"))&&e(q)[e(Y)(n)||""]?(t(),_("div",Xn,[c[12]||(c[12]=u("div",{class:"ml-4 h-14 w-4 shrink-0 border-b border-l border-dashed border-gray-400 dark:border-gray-500"},null,-1)),u("div",{class:Be(`relative mt-4 grow rounded-md border-l-4 bg-white px-8 py-6 shadow dark:bg-gray-800 ${Te(n)}`)},[u("div",Yn,[u("div",Qn,[u("div",Jn,v(e(D)("standalone.interfaces_and_devices.bond")),1)]),u("div",et,[u("div",null,"Management IP: "+v(n.ipaddr),1),N(" "+v(e(D)("standalone.interfaces_and_devices.devices_pl",((ye=n.slaves)==null?void 0:ye.length)||0))+": ",1),(t(!0),_(Z,null,de(n.slaves,(he,qe)=>(t(),_("div",{key:qe},v(he),1))),128))])])],2)])):y("",!0)]}),_:2},1024)])}),128))])]))],64))),256))]),p(ki,{iface:e(M),networkConfigDevice:e(ce),networkConfig:e(s),isShown:e(m),aliasToEdit:e(Q),onClose:Ae,onReloadData:ne},null,8,["iface","networkConfigDevice","networkConfig","isShown","aliasToEdit"]),p(hi,{visible:e(O),alias:e(E),parentInterface:e(I),onClose:c[0]||(c[0]=b=>F(O)?O.value=!1:O=!1),onReloadData:ne},null,8,["visible","alias","parentInterface"]),p(Oi,{device:e(g),deviceType:e(T),allDevices:e(a),networkConfig:e(s),isShown:e(oe),interfaceToEdit:e(W),onClose:ka,onReloadData:ne},null,8,["device","deviceType","allDevices","networkConfig","isShown","interfaceToEdit"]),p(Ri,{visible:e(V),device:e(g),networkConfig:e(s),onClose:c[1]||(c[1]=b=>F(V)?V.value=!1:V=!1),onReloadData:ne},null,8,["visible","device","networkConfig"]),p(Ui,{networkConfig:e(s),allDevices:e(a),isShown:e(R),onClose:Da,onReloadData:ne},null,8,["networkConfig","allDevices","isShown"]),p(Pi,{visible:e(h),device:e(g),onClose:c[2]||(c[2]=b=>F(h)?h.value=!1:h=!1),onReloadData:ne},null,8,["visible","device"]),p(ji,{visible:e(U),bond:ve.value,onClose:c[3]||(c[3]=b=>F(U)?U.value=!1:U=!1),onSuccess:c[4]||(c[4]=b=>_a())},null,8,["visible","bond"])]))}});export{ct as default};
