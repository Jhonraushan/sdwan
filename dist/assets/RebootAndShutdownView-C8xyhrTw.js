import{u as N}from"./useTimer-hCPxFuk6.js";import{d as S,u as z,r,o as A,h as l,q as _,j as v,k as t,w as n,m as s,t as i,l as e,W as h,i as p,L as C,n as x,y as W,z as f,F as P,_ as $,Y as B,P as O,e as E,V as I}from"./index-BlEQ5104.js";const Y={class:"flex flex-col gap-y-4"},j=45e3,L=S({__name:"RebootAndShutdownView",setup(D){const{t:a}=z(),y=r(""),R=r(!0),w=r(!1),g=r(!1),d=r(!1),c=r(""),k=r(""),b=r(!1),{startTimer:M,currentProgress:q}=N({duration:j,progressStep:.5,onTimerFinish:()=>{location.reload()}});async function F(){try{let u=await E("system","board");y.value=u.data.hostname,R.value=!1}catch(u){k.value=a(I(u))}}async function T(u){try{d.value=!0,await E("ns.power",u),u=="reboot"&&(b.value=!0,M())}catch(o){c.value=a(I(o))}finally{d.value=!1}}function V(){g.value=!1,w.value=!1,c.value=""}return A(()=>{F()}),(u,o)=>(l(),_(f,null,[v("div",null,[t(e(h),{tag:"h3",class:"mb-7"},{default:n(()=>[s(i(e(a)("standalone.reboot_and_shutdown.title")),1)]),_:1}),v("div",Y,[t(e(h),{tag:"h5",class:"mb-2"},{default:n(()=>[s(i(e(a)("standalone.reboot_and_shutdown.reboot")),1)]),_:1}),k.value?(l(),p(e(C),{key:0,title:e(a)("error.generic_error"),description:k.value,kind:"error"},null,8,["title","description"])):x("",!0),R.value?(l(),p(e(W),{key:1,lines:6})):(l(),_(f,{key:2},[v("div",null,[t(e($),{kind:"secondary",size:"lg",onClick:o[0]||(o[0]=m=>g.value=!0)},{prefix:n(()=>[t(e(P),{icon:["fas","arrows-rotate"],"aria-hidden":"true"})]),default:n(()=>[s(" "+i(e(a)("standalone.reboot_and_shutdown.reboot_unit")),1)]),_:1})]),o[6]||(o[6]=v("hr",{class:"my-4"},null,-1)),t(e(h),{tag:"h5",class:"mb-2"},{default:n(()=>[s(i(e(a)("standalone.reboot_and_shutdown.shutdown")),1)]),_:1}),v("div",null,[t(e($),{kind:"secondary",size:"lg",onClick:o[1]||(o[1]=m=>w.value=!0)},{prefix:n(()=>[t(e(P),{icon:["fas","power-off"],"aria-hidden":"true"})]),default:n(()=>[s(" "+i(e(a)("standalone.reboot_and_shutdown.shut_down_unit")),1)]),_:1})])],64))])]),t(e(B),{"primary-label":e(a)("standalone.reboot_and_shutdown.shut_down_unit"),title:e(a)("standalone.reboot_and_shutdown.shutdown"),"primary-button-loading":d.value,"primary-button-disabled":d.value,"cancel-label":e(a)("common.cancel"),visible:w.value,kind:"warning","primary-button-kind":"danger","close-aria-label":e(a)("common.close"),onClose:o[2]||(o[2]=m=>V()),onPrimaryClick:o[3]||(o[3]=m=>T("poweroff"))},{default:n(()=>[s(i(e(a)("standalone.reboot_and_shutdown.shutdown_warning",{unit:y.value}))+" ",1),c.value?(l(),p(e(C),{key:0,title:e(a)("error.generic_error"),description:c.value,kind:"error",class:"my-6"},null,8,["title","description"])):x("",!0)]),_:1},8,["primary-label","title","primary-button-loading","primary-button-disabled","cancel-label","visible","close-aria-label"]),t(e(B),{"primary-label":e(a)("standalone.reboot_and_shutdown.reboot_now"),"primary-button-loading":d.value||b.value,"primary-button-disabled":d.value||b.value,title:e(a)("standalone.reboot_and_shutdown.reboot"),"cancel-label":b.value?"":e(a)("common.cancel"),visible:g.value,kind:"warning","primary-button-kind":"danger","close-aria-label":e(a)("common.close"),onClose:o[4]||(o[4]=m=>b.value?void 0:V()),onPrimaryClick:o[5]||(o[5]=m=>T("reboot"))},{default:n(()=>[b.value?(l(),_(f,{key:0},[s(i(e(a)("standalone.reboot_and_shutdown.reboot_in_progress"))+" ",1),t(e(O),{class:"my-4",progress:e(q)},null,8,["progress"])],64)):(l(),_(f,{key:1},[s(i(e(a)("standalone.reboot_and_shutdown.reboot_warning",{unit:y.value}))+" ",1),c.value?(l(),p(e(C),{key:0,title:e(a)("error.generic_error"),description:c.value,kind:"error",class:"my-6"},null,8,["title","description"])):x("",!0)],64))]),_:1},8,["primary-label","primary-button-loading","primary-button-disabled","title","cancel-label","visible","close-aria-label"])],64))}});export{L as default};
