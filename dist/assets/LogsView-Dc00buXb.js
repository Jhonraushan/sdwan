import{d as I,u as O,r as a,aa as U,c as N,J as h,o as z,b as D,e as T,ag as E,h as b,q as V,k as n,w as x,m as L,t as w,l as e,W as M,j as p,s as S,Q as W,a0 as j,a5 as B,i as q,V as H,L as J,n as K,z as C,ad as Q,av as A}from"./index-BlEQ5104.js";const G={class:"space-y-8"},P={class:"grid grid-cols-1 gap-6 sm:max-w-xl sm:grid-cols-2"},X={class:"col-span-1 flex gap-8 sm:col-span-2"},$=I({__name:"LogsView",setup(Y){const y=[{id:"100",label:"100"},{id:"200",label:"200"},{id:"500",label:"500"},{id:"1000",label:"1000"}],{t:l}=O(),d=a(y[0].id),_=a(!0),u=a(""),c=a(!1),m=a(),r=a(new U),g=a(null),f=a(),i=a(),k=a(!1),R=N(()=>_.value?"break-all":"whitespace-nowrap");h(f,()=>{setTimeout(()=>{g.value!=null&&(g.value.scrollTop=g.value.scrollHeight)},50)}),h([d,u],()=>{v()}),h(c,()=>{c.value?(v(),m.value=setInterval(()=>{v()},2500)):clearInterval(m.value)}),z(()=>{v()}),D(()=>{m.value&&clearInterval(m.value)});function v(){i.value=void 0,r.value.clear(),k.value=!0,T("ns.log","get-log",{search:u.value,limit:d.value}).then(t=>{f.value=t.data.values}).catch(t=>{t instanceof E?(t.errorBag.has("search")&&r.value.set("search",l("standalone.logs.search_error")),t.errorBag.has("limit")&&r.value.set("limit",l("standalone.logs.limit_error"))):i.value=t}).finally(()=>k.value=!1)}return(t,s)=>(b(),V(C,null,[n(e(M),{tag:"h3",class:"mb-7"},{default:x(()=>[L(w(e(l)("standalone.logs.title")),1)]),_:1}),p("div",G,[p("div",P,[n(e(W),{modelValue:u.value,"onUpdate:modelValue":s[0]||(s[0]=o=>u.value=o),"invalid-message":r.value.getFirstFor("search"),label:e(l)("standalone.logs.search"),placeholder:e(l)("standalone.logs.search_placeholder")},{tooltip:x(()=>[n(e(S),null,{content:x(()=>[L(w(e(l)("standalone.logs.search_tooltip")),1)]),_:1})]),_:1},8,["modelValue","invalid-message","label","placeholder"]),n(e(j),{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=o=>d.value=o),"invalid-message":r.value.getFirstFor("limits"),label:e(l)("standalone.logs.limit_rows"),options:y,noResultsLabel:e(l)("ne_combobox.no_results"),limitedOptionsLabel:e(l)("ne_combobox.limited_options_label"),noOptionsLabel:e(l)("ne_combobox.no_options_label"),"selected-label":e(l)("ne_combobox.selected"),"user-input-label":e(l)("ne_combobox.user_input_label"),optionalLabel:e(l)("common.optional")},null,8,["modelValue","invalid-message","label","noResultsLabel","limitedOptionsLabel","noOptionsLabel","selected-label","user-input-label","optionalLabel"]),p("div",X,[n(e(B),{modelValue:_.value,"onUpdate:modelValue":s[2]||(s[2]=o=>_.value=o),label:e(l)("standalone.logs.wrap_row")},null,8,["modelValue","label"]),n(e(B),{modelValue:c.value,"onUpdate:modelValue":s[3]||(s[3]=o=>c.value=o),label:e(l)("standalone.logs.pooling")},null,8,["modelValue","label"])])]),i.value?(b(),q(e(J),{key:0,description:i.value.message,title:e(l)(e(H)(i.value)),kind:"error"},null,8,["description","title"])):K("",!0),p("ul",{ref_key:"logRef",ref:g,class:"max-h-[55vh] max-w-6xl divide-y divide-gray-300 overflow-y-scroll rounded-md border border-gray-300 font-mono text-sm dark:divide-gray-600 dark:border-gray-600"},[(b(!0),V(C,null,Q(f.value,(o,F)=>(b(),V("li",{key:F,class:A([R.value,"p-2 odd:bg-gray-100 odd:dark:bg-gray-950"])},w(o),3))),128))],512)])],64))}});export{$ as default};
