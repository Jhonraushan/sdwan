import{bR as A,u as $,r as s,d4 as g,ay as e,d9 as o,V as p}from"./index-BlEQ5104.js";const m=A("accounts",()=>{const{t:d}=$(),h=s({key:"",key_pub:""}),y=s([]),r=s(!1),n=s({notificationDescription:"",notificationDetails:""}),u=s(!1),i=s({notificationDescription:"",notificationDetails:""}),a=g();return{sshKeys:h,accounts:y,listAccountsLoading:r,listAccountsError:n,listSshKeysLoading:u,listSshKeysError:i,loadSshKeys:async()=>{i.value.notificationDescription="",i.value.notificationDetails="";try{u.value=!0;const t=await e.get(`${o()}/accounts/ssh-keys`,{headers:{Authorization:`Bearer ${a.token}`}});h.value=t.data.data}catch(t){i.value.notificationDescription=d(p(t)),i.value.notificationDetails=t.toString()}finally{u.value=!1}},generateSshKeys:async t=>(await e.post(`${o()}/accounts/ssh-keys`,{passphrase:t},{headers:{Authorization:`Bearer ${a.token}`}})).data,deleteSshKeys:async()=>(await e.delete(`${o()}/accounts/ssh-keys`,{headers:{Authorization:`Bearer ${a.token}`}})).data,changePassword:async(t,c)=>(await e.put(`${o()}/accounts/password`,{old_password:t,new_password:c},{headers:{Authorization:`Bearer ${a.token}`}})).data,loadAccounts:async()=>{n.value.notificationDescription="",n.value.notificationDetails="";try{r.value=!0;const t=await e.get(`${o()}/accounts`,{headers:{Authorization:`Bearer ${a.token}`}});y.value=t.data.data.accounts}catch(t){n.value.notificationDescription=d(p(t)),n.value.notificationDetails=t.toString()}finally{r.value=!1}},addAccount:async(t,c,l)=>{await e.post(`${o()}/accounts`,{username:t,password:c,display_name:l},{headers:{Authorization:`Bearer ${a.token}`}})},updateAccount:async(t,c,l,f)=>{await e.put(`${o()}/accounts/${t}`,{username:c,password:l,display_name:f},{headers:{Authorization:`Bearer ${a.token}`}})},deleteAccount:async t=>{await e.delete(`${o()}/accounts/${t}`,{headers:{Authorization:`Bearer ${a.token}`}})}}});export{m as u};
