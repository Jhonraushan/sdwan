import{d as F,ac as E,u as R,r as u,o as L,e as C,V as D,h as l,q as g,k as o,w as i,j as T,t as c,l as e,I as j,F as y,cQ as q,m as d,i as _,y as A,n as m,L as I,a5 as Q,s as S,Q as W,_ as x,cR as B,cS as K,W as M}from"./index-BlEQ5104.js";import{_ as G}from"./FormLayout.vue_vue_type_script_setup_true_lang-DaMAl8E3.js";const H={key:3,class:"mb-8 flex flex-col gap-y-6"},J={key:0,class:"relative flex items-end gap-2"},O=F({__name:"NetifyInformaticsContent",setup(U){const b=E(),{t}=R(),r=u(!1),p=u(""),a=u({getNotificationTitle:"",getNotificationDescription:"",saveNotificationTitle:"",saveNotificationDescription:""}),f=u(!1),N=u(!1),$=u(),k=u(!1);L(()=>{V(),h()});async function h(){try{f.value=!0;let n=await C("ns.netifyd","status",{});if(n&&n.data){let s=n.data;r.value=s.enabled,p.value=s.uuid}}catch(n){console.error(n),a.value.getNotificationTitle=t("error.cannot_retrieve_netify_informatics_configuration"),a.value.getNotificationDescription=t(D(n))}finally{f.value=!1}}function V(){a.value={getNotificationTitle:"",getNotificationDescription:"",saveNotificationTitle:"",saveNotificationDescription:""}}async function z(){V();try{N.value=!0;const n=r.value?"enable":"disable";await C("ns.netifyd",n),b.createNotification({title:t("standalone.netify_informatics.metadata_sending_"+n),description:t("standalone.netify_informatics.metadata_sending_configuration_saved_successfully"),kind:"success"}),h()}catch(n){console.error(n),a.value.saveNotificationTitle=t("error.cannot_save_configuration"),a.value.saveNotificationDescription=t(D(n))}finally{N.value=!1}}function w(){navigator.clipboard.writeText(p.value),k.value=!0,setTimeout(()=>{k.value=!1},3e3)}return(n,s)=>(l(),g("div",null,[o(G,{class:"max-w-6xl"},{description:i(()=>[T("p",null,c(e(t)("standalone.netify_informatics.content_description")),1),o(e(j),{href:"https://portal.netify.ai/login",target:"_blank",class:"mt-4 inline-block"},{default:i(()=>[o(e(y),{class:"mr-2",icon:e(q)},null,8,["icon"]),d(" "+c(e(t)("standalone.netify_informatics.open_netify_dashboard")),1)]),_:1})]),default:i(()=>[f.value?(l(),_(e(A),{key:0,lines:5})):m("",!0),a.value.getNotificationTitle?(l(),_(e(I),{key:1,class:"my-4",kind:"error",title:a.value.getNotificationTitle,description:a.value.getNotificationDescription},null,8,["title","description"])):m("",!0),a.value.saveNotificationTitle?(l(),_(e(I),{key:2,class:"my-4",kind:"error",title:a.value.saveNotificationTitle,description:a.value.saveNotificationDescription},null,8,["title","description"])):m("",!0),f.value?m("",!0):(l(),g("div",H,[o(e(Q),{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=v=>r.value=v),disabled:a.value.getNotificationTitle!=="",topLabel:e(t)("standalone.netify_informatics.metadata_sending"),label:r.value?e(t)("standalone.netify_informatics.status_enabled"):e(t)("standalone.netify_informatics.status_disabled")},{topTooltip:i(()=>[o(e(S),null,{content:i(()=>[d(c(e(t)("standalone.netify_informatics.enable_metadata_sending")),1)]),_:1})]),_:1},8,["modelValue","disabled","topLabel","label"]),r.value?(l(),g("div",J,[o(e(W),{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=v=>p.value=v),disabled:"",label:e(t)("standalone.netify_informatics.uuid"),ref_key:"uuidRef",ref:$},null,8,["modelValue","label"]),k.value?(l(),_(e(S),{key:0,triggerEvent:"mouseenter focus",placement:"top-start"},{trigger:i(()=>[o(e(x),{kind:"secondary",size:"md",onClick:w,class:"mb-px ml-2.5"},{prefix:i(()=>[o(e(y),{icon:e(B),class:"h-4 w-4","aria-hidden":"true"},null,8,["icon"])]),default:i(()=>[d(" "+c(e(t)("standalone.netify_informatics.copy")),1)]),_:1})]),content:i(()=>[d(c(e(t)("standalone.netify_informatics.copied_to_clipboard")),1)]),_:1})):(l(),_(e(x),{key:1,disabled:a.value.getNotificationTitle!=="",kind:"secondary",size:"md",onClick:w,class:"mb-px ml-2.5"},{prefix:i(()=>[o(e(y),{icon:e(B),class:"h-4 w-4","aria-hidden":"true"},null,8,["icon"])]),default:i(()=>[d(" "+c(e(t)("standalone.netify_informatics.copy")),1)]),_:1},8,["disabled"]))])):m("",!0),T("div",null,[o(e(x),{disabled:a.value.getNotificationTitle!==""||N.value,loading:f.value,kind:"primary",onClick:s[2]||(s[2]=v=>z())},{prefix:i(()=>[o(e(y),{icon:e(K),class:"h-4 w-4","aria-hidden":"true"},null,8,["icon"])]),default:i(()=>[d(" "+c(e(t)("common.save")),1)]),_:1},8,["disabled","loading"])])]))]),_:1})]))}}),P={class:"flex flex-col gap-y-6"},Z=F({__name:"NetifyInformaticsView",setup(U){const{t:b}=R();return(t,r)=>(l(),g("div",P,[o(e(M),{tag:"h3",class:"mb-7"},{default:i(()=>[d(c(e(b)("standalone.netify_informatics.title")),1)]),_:1}),T("div",null,[o(O)])]))}});export{Z as default};
