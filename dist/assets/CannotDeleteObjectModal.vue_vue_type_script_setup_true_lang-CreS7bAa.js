import{d as x,u as C,a as S,E as T,r as p,o as $,e as q,V as D,g as E,h as l,q as u,i as v,M as G,w as m,m as I,t as f,l as s,L as M,y as V,z as k,ad as B,j as d,k as h,_ as A,n as P,v as z,bI as N,Y as R}from"./index-BlEQ5104.js";const U={key:2,class:"space-y-5"},Y={class:"flex items-center justify-between"},F={class:"font-medium"},K=x({__name:"ObjectUsages",props:{usageIds:{type:Array,required:!0},showGoToObjectsButton:{type:Boolean,required:!0}},setup(r){const w=r,{t:e}=C(),i=S(),g=T(),c=p({}),_=p({getInfo:!1}),a=p({getInfo:"",getInfoDetails:""});$(()=>{j()});async function j(){_.value.getInfo=!0,c.value={},a.value.getInfo="",a.value.getInfoDetails="";try{const o=await q("ns.objects","get-info",{ids:w.usageIds});for(const t of Object.values(o.data.info)){const b=`${t.database}_${t.type}`,n=c.value[b]||[];n.push(t),c.value[b]=n}}catch(o){console.error(o),a.value.getInfo=e(D(o)),a.value.getInfoDetails=o.toString()}finally{_.value.getInfo=!1}}function O(o){switch(o){case"firewall_rule":return e("common.go_to_page",{page:e("standalone.firewall_rules.title")});case"objects_host":case"objects_domain_set":return e("common.go_to_page",{page:e("standalone.objects.title")});case"mwan3_rule":return e("common.go_to_page",{page:e("standalone.multi_wan.title")});case"firewall_redirect":return e("common.go_to_page",{page:e("standalone.port_forward.title")})}}function L(o){let t="";switch(o){case"firewall_rule":t="firewall/rules";break;case"objects_host":case"objects_domain_set":t="users-objects/objects";break;case"mwan3_rule":t="network/multi-wan";break;case"firewall_redirect":t="firewall/port-forward";break}i.push(`${z(g)}/${t}`)}return(o,t)=>{const b=E("font-awesome-icon");return l(),u("div",null,[a.value.getInfo?(l(),v(s(M),{key:0,kind:"error",title:s(e)("error.cannot_retrieve_usages"),description:a.value.getInfo,class:"mt-4"},G({_:2},[a.value.getInfoDetails?{name:"details",fn:m(()=>[I(f(a.value.getInfoDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):_.value.getInfo?(l(),v(s(V),{key:1,lines:3,size:"lg"})):(l(),u("div",U,[(l(!0),u(k,null,B(Object.keys(c.value),n=>(l(),u("div",{key:n},[d("div",Y,[d("div",F,f(s(e)(`standalone.objects.type_${n}`)),1),r.showGoToObjectsButton||n!=="objects_host"&&n!=="objects_domain_set"?(l(),v(s(A),{key:0,size:"sm",kindName:"tertiary",onClick:y=>L(n),class:"shrink-0"},{prefix:m(()=>[h(b,{icon:["fas","arrow-right"],class:"h-4 w-4","aria-hidden":"true"})]),default:m(()=>[I(" "+f(O(n)),1)]),_:2},1032,["onClick"])):P("",!0)]),t[0]||(t[0]=d("hr",{class:"mb-2 mt-1"},null,-1)),d("ul",null,[(l(!0),u(k,null,B(c.value[n],y=>(l(),u("li",{key:y.id,class:"list-inside list-disc"},f(y.name),1))),128))])]))),128))]))])}}}),H={class:"space-y-4"},Q=x({__name:"CannotDeleteObjectModal",props:{visible:{type:Boolean,required:!0},objectName:{type:String,required:!0},usageIds:{type:Array,required:!0},showGoToObjectsButton:{type:Boolean,required:!0}},emits:["close"],setup(r,{emit:w}){const e=w,{t:i}=C(),g=p(!1);function c(){g.value=!1,e("close")}return(_,a)=>(l(),v(s(R),{visible:r.visible,title:s(i)("standalone.objects.cannot_delete_object_name",{name:r.objectName}),kind:"warning",primaryLabel:s(i)("common.close"),cancelLabel:"",closeAriaLabel:s(i)("common.close"),onClose:c,onPrimaryClick:c},{default:m(()=>[d("div",H,[d("div",null,f(s(i)("standalone.objects.cannot_delete_object_description",{name:r.objectName})),1),h(s(N),{label:s(i)("standalone.objects.show_usages"),isExpanded:g.value,onSetExpanded:a[0]||(a[0]=j=>g.value=j)},{default:m(()=>[h(K,{usageIds:r.usageIds,showGoToObjectsButton:r.showGoToObjectsButton},null,8,["usageIds","showGoToObjectsButton"])]),_:1},8,["label","isExpanded"])])]),_:1},8,["visible","title","primaryLabel","closeAriaLabel"]))}});export{Q as _,K as a};
