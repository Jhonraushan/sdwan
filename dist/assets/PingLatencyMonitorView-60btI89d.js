import{d as B,u as M,r,o as N,e as b,V as D,h as f,q as L,k as v,w as u,m as p,t as m,l as i,W as F,j as _,i as h,y as j,n as g,M as x,L as V,F as I,_ as P,a8 as W}from"./index-BlEQ5104.js";import{_ as $}from"./NeMultiTextInput.vue_vue_type_script_setup_true_lang-DwfeP71-.js";import"./isArrayLikeObject-CpCvCe5A.js";const q={class:"mb-6 max-w-2xl text-sm font-normal text-gray-500 dark:text-gray-400"},A={key:2,class:"max-w-md"},E={class:"flex justify-end py-6"},U=B({__name:"PingLatencyMonitorView",setup(H){const{t:a}=M(),c=r({hostList:[""]}),d=r(!0),l=r(!1);let e=r({notificationTitle:"",notificationDescription:"",notificationDetails:""}),o=r({notificationTitle:"",notificationDescription:"",notificationDetails:""}),y=r({hostList:[""]});N(()=>{k()});async function k(){var n;d.value=!0;try{let t=await b("ns.netdata","get-configuration",{});(n=t==null?void 0:t.data)!=null&&n.hosts&&(c.value.hostList=t.data.hosts)}catch(t){e.value.notificationTitle=a("error.cannot_retrieve_netdata_configuration"),e.value.notificationDescription=a(D(t)),e.value.notificationDetails=t.toString()}finally{d.value=!1}}function T(){let n=!0;for(let[t,s]of c.value.hostList.entries())if(s){let{valid:C,errMessage:S}=W(s);C||(y.value.hostList[t]=a(S),n=!1)}return n}function w(){if(y.value={hostList:[""]},T()){l.value=!0;let n={hosts:c.value.hostList.filter(t=>t)};b("ns.netdata","set-hosts",n).then(t=>{var s;(s=t==null?void 0:t.data)!=null&&s.success&&t.data.success&&k()}).catch(t=>{o.value.notificationTitle=a("error.cannot_save_configuration"),o.value.notificationDescription=a(D(t)),o.value.notificationDetails=t.toString()}).finally(()=>l.value=!1)}}return(n,t)=>(f(),L("div",null,[v(i(F),{tag:"h3",class:"mb-7"},{default:u(()=>[p(m(i(a)("standalone.ping_latency_monitor.title")),1)]),_:1}),_("p",q,m(i(a)("standalone.ping_latency_monitor.description")),1),d.value?(f(),h(i(j),{key:0,lines:5})):g("",!0),!d.value&&i(e).notificationTitle?(f(),h(i(V),{key:1,class:"my-4",kind:"error",title:i(e).notificationTitle,description:i(e).notificationDescription},x({_:2},[i(e).notificationDetails?{name:"details",fn:u(()=>[p(m(i(e).notificationDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):g("",!0),!d.value&&!i(e).notificationTitle?(f(),L("div",A,[v($,{modelValue:c.value.hostList,"onUpdate:modelValue":t[0]||(t[0]=s=>c.value.hostList=s),title:i(a)("standalone.ping_latency_monitor.host_to_monitor"),"add-item-label":i(a)("standalone.ping_latency_monitor.add_host"),"invalid-messages":i(y).hostList,"disable-inputs":l.value,"disable-add-button":l.value,optional:"",optionalLabel:i(a)("common.optional"),ref:"hostListRef"},null,8,["modelValue","title","add-item-label","invalid-messages","disable-inputs","disable-add-button","optionalLabel"]),t[2]||(t[2]=_("div",{class:"mt-6"},[_("hr")],-1)),i(o).notificationTitle?(f(),h(i(V),{key:0,class:"my-4",kind:"error",title:i(o).notificationTitle,description:i(o).notificationDescription},x({_:2},[i(o).notificationDetails?{name:"details",fn:u(()=>[p(m(i(o).notificationDetails),1)]),key:"0"}:void 0]),1032,["title","description"])):g("",!0),_("div",E,[v(i(P),{disabled:l.value,kind:"primary",loading:l.value,onClick:t[1]||(t[1]=s=>w())},{prefix:u(()=>[v(i(I),{icon:["fas","floppy-disk"],class:"h-4 w-4","aria-hidden":"true"})]),default:u(()=>[p(" "+m(i(a)("common.save")),1)]),_:1},8,["disabled","loading"])])])):g("",!0)]))}});export{U as default};
